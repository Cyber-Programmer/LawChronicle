{"ast":null,"code":"var _jsxFileName = \"D:\\\\DigiFloat\\\\LawChronicle\\\\frontend\\\\src\\\\components\\\\DateSearchTab.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Search, Download, Upload, FileSpreadsheet, Brain, CheckCircle, AlertCircle, RefreshCw, StopCircle, Eye } from 'lucide-react';\nimport apiClient from '../services/authService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DateSearchTab = () => {\n  _s();\n  const [availableCollections, setAvailableCollections] = useState([]);\n  const [selectedCollections, setSelectedCollections] = useState([]);\n  const [scanResults, setScanResults] = useState(null);\n  const [searchSessions, setSearchSessions] = useState([]);\n  const [currentOperation, setCurrentOperation] = useState(null);\n  const [progress, setProgress] = useState({\n    progress: 0\n  });\n  const [loading, setLoading] = useState({});\n  const [error, setError] = useState(null);\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [lastUploadedFile, setLastUploadedFile] = useState(null);\n  const [lastUploadedSessionId, setLastUploadedSessionId] = useState(null);\n  const [applyResult, setApplyResult] = useState(null);\n  const eventSourceRef = useRef(null);\n  useEffect(() => {\n    fetchAvailableCollections();\n    fetchSearchSessions();\n  }, []);\n  useEffect(() => {\n    // Auto-dismiss messages\n    if (successMessage) {\n      const timer = setTimeout(() => setSuccessMessage(null), 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [successMessage]);\n  useEffect(() => {\n    // Cleanup EventSource on unmount\n    return () => {\n      if (eventSourceRef.current) {\n        eventSourceRef.current.close();\n      }\n    };\n  }, []);\n  const fetchAvailableCollections = async () => {\n    try {\n      const response = await apiClient.get('/phase4/search/collections');\n      setAvailableCollections(response.data.collections);\n      setSelectedCollections(response.data.collections); // Select all by default\n    } catch (err) {\n      setError('Failed to fetch collections');\n      console.error('Fetch collections error:', err);\n    }\n  };\n  const fetchSearchSessions = async () => {\n    try {\n      const response = await apiClient.get('/phase4/search/search-sessions');\n      setSearchSessions(response.data.sessions);\n    } catch (err) {\n      console.error('Fetch search sessions error:', err);\n    }\n  };\n  const viewSearchResults = async sessionId => {\n    try {\n      setLoading(prev => ({\n        ...prev,\n        viewResults: true\n      }));\n      const response = await apiClient.get(`/phase4/search/search-results/${sessionId}`, {\n        responseType: 'blob'\n      });\n\n      // Create download link for Excel file\n      const blob = new Blob([response.data], {\n        type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n      });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n\n      // Extract filename from Content-Disposition header or use default\n      const contentDisposition = response.headers['content-disposition'];\n      let filename = `search-results-${sessionId}.xlsx`;\n      if (contentDisposition) {\n        const filenameMatch = contentDisposition.match(/filename=([^;]+)/);\n        if (filenameMatch) {\n          filename = filenameMatch[1].replace(/\"/g, '');\n        }\n      }\n      link.download = filename;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      URL.revokeObjectURL(url);\n    } catch (err) {\n      setError('Failed to download search results');\n      console.error('View search results error:', err);\n    } finally {\n      setLoading(prev => ({\n        ...prev,\n        viewResults: false\n      }));\n    }\n  };\n  const clearSearchSessions = async () => {\n    if (!window.confirm('Are you sure you want to clear all search session history? This action cannot be undone.')) {\n      return;\n    }\n    try {\n      setLoading(prev => ({\n        ...prev,\n        clearSessions: true\n      }));\n      const response = await apiClient.delete('/phase4/search/search-sessions');\n      setSearchSessions([]);\n      alert(`Cleared ${response.data.cleared_sessions} search sessions`);\n    } catch (err) {\n      setError('Failed to clear search sessions');\n      console.error('Clear search sessions error:', err);\n    } finally {\n      setLoading(prev => ({\n        ...prev,\n        clearSessions: false\n      }));\n    }\n  };\n  const deleteSearchSession = async sessionId => {\n    if (!window.confirm(`Are you sure you want to delete search session ${sessionId}?`)) {\n      return;\n    }\n    try {\n      await apiClient.delete(`/phase4/search/search-sessions/${sessionId}`);\n      setSearchSessions(prev => prev.filter(s => s.session_id !== sessionId));\n    } catch (err) {\n      setError('Failed to delete search session');\n      console.error('Delete search session error:', err);\n    }\n  };\n  const setupProgressTracking = operationId => {\n    if (eventSourceRef.current) {\n      eventSourceRef.current.close();\n    }\n    const eventSource = new EventSource(`http://localhost:8000/api/v1/phase4/search/progress-stream/${operationId}`);\n    eventSourceRef.current = eventSource;\n    eventSource.onmessage = event => {\n      try {\n        const data = JSON.parse(event.data);\n        switch (data.type) {\n          case 'connected':\n            console.log('SSE connected for operation:', operationId);\n            break;\n          case 'scan_progress':\n          case 'search_progress':\n            setProgress({\n              progress: data.progress || 0,\n              current_collection: data.current_collection,\n              collections_processed: data.collections_processed,\n              total_collections: data.total_collections,\n              current_statute: data.current_statute,\n              processed_count: data.processed_count\n            });\n            break;\n          case 'scan_completed':\n            setScanResults(data.results);\n            setCurrentOperation(prev => prev ? {\n              ...prev,\n              status: 'completed'\n            } : null);\n            setProgress({\n              progress: 100\n            });\n            setSuccessMessage('Scan completed successfully!');\n            eventSource.close();\n            break;\n          case 'search_completed':\n            setCurrentOperation(prev => prev ? {\n              ...prev,\n              status: 'completed'\n            } : null);\n            setProgress({\n              progress: 100\n            });\n            setSuccessMessage(`AI search completed! Session ID: ${data.session_id}`);\n            fetchSearchSessions(); // Refresh sessions\n            eventSource.close();\n            break;\n          case 'scan_error':\n          case 'search_error':\n            setCurrentOperation(prev => prev ? {\n              ...prev,\n              status: 'error'\n            } : null);\n            setError(data.error || 'Operation failed');\n            eventSource.close();\n            break;\n          case 'operation_stopped':\n            setCurrentOperation(prev => prev ? {\n              ...prev,\n              status: 'stopped'\n            } : null);\n            setSuccessMessage('Operation stopped successfully');\n            eventSource.close();\n            break;\n        }\n      } catch (err) {\n        console.error('SSE parsing error:', err);\n      }\n    };\n    eventSource.onerror = error => {\n      console.error('SSE error:', error);\n      eventSource.close();\n    };\n  };\n  const startScanMissingDates = async () => {\n    try {\n      setLoading(prev => ({\n        ...prev,\n        scan: true\n      }));\n      setError(null);\n      const response = await apiClient.post('/phase4/search/scan-missing-dates', {\n        collections: selectedCollections.length > 0 ? selectedCollections : null\n      });\n      const scanId = response.data.scan_id;\n      setCurrentOperation({\n        type: 'scan',\n        id: scanId,\n        status: 'running'\n      });\n      setProgress({\n        progress: 0\n      });\n\n      // Setup progress tracking\n      setupProgressTracking(scanId);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || 'Failed to start scan');\n      console.error('Start scan error:', err);\n    } finally {\n      setLoading(prev => ({\n        ...prev,\n        scan: false\n      }));\n    }\n  };\n  const exportMissingDates = async () => {\n    try {\n      setLoading(prev => ({\n        ...prev,\n        export: true\n      }));\n      setError(null);\n      const response = await apiClient.post('/phase4/search/export-missing-dates', {\n        collections: selectedCollections.length > 0 ? selectedCollections : null\n      }, {\n        responseType: 'blob'\n      });\n\n      // Create download link\n      const blob = new Blob([response.data], {\n        type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n      });\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n\n      // Extract filename from Content-Disposition header or use default\n      const contentDisposition = response.headers['content-disposition'];\n      let filename = `missing_dates_${new Date().toISOString().split('T')[0]}.xlsx`; // fallback\n      if (contentDisposition) {\n        const filenameMatch = contentDisposition.match(/filename=([^;]+)/);\n        if (filenameMatch) {\n          filename = filenameMatch[1].replace(/\"/g, ''); // remove quotes\n        }\n      }\n      a.download = filename;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n      setSuccessMessage('Excel file downloaded successfully!');\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.detail) || 'Failed to export missing dates');\n      console.error('Export error:', err);\n    } finally {\n      setLoading(prev => ({\n        ...prev,\n        export: false\n      }));\n    }\n  };\n  const startAISearch = async () => {\n    try {\n      setLoading(prev => ({\n        ...prev,\n        aiSearch: true\n      }));\n      setError(null);\n      const response = await apiClient.post('/phase4/search/search-dates-ai', {\n        collections: selectedCollections.length > 0 ? selectedCollections : null,\n        use_ai: true\n        // max_documents removed - process all missing dates like reference implementation\n      });\n      const searchId = response.data.search_id;\n      setCurrentOperation({\n        type: 'search',\n        id: searchId,\n        status: 'running'\n      });\n      setProgress({\n        progress: 0\n      });\n\n      // Setup progress tracking\n      setupProgressTracking(searchId);\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      setError(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.detail) || 'Failed to start AI search');\n      console.error('Start AI search error:', err);\n    } finally {\n      setLoading(prev => ({\n        ...prev,\n        aiSearch: false\n      }));\n    }\n  };\n  const stopCurrentOperation = async () => {\n    if (!currentOperation) return;\n    try {\n      setLoading(prev => ({\n        ...prev,\n        stop: true\n      }));\n      await apiClient.post(`/phase4/search/stop-operation/${currentOperation.id}`);\n    } catch (err) {\n      var _err$response4, _err$response4$data;\n      setError(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.detail) || 'Failed to stop operation');\n      console.error('Stop operation error:', err);\n    } finally {\n      setLoading(prev => ({\n        ...prev,\n        stop: false\n      }));\n    }\n  };\n  const handleFileUpload = async event => {\n    var _event$target$files;\n    const file = (_event$target$files = event.target.files) === null || _event$target$files === void 0 ? void 0 : _event$target$files[0];\n    if (!file) return;\n    try {\n      setLoading(prev => ({\n        ...prev,\n        upload: true\n      }));\n      setError(null);\n      const formData = new FormData();\n      formData.append('file', file);\n      const response = await apiClient.post('/phase4/search/upload-reviewed-excel', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      setSuccessMessage(`Upload successful! ${response.data.approved_dates} approved dates found.`);\n      // Save uploaded file and session id for two-step apply\n      setLastUploadedFile(file);\n      setLastUploadedSessionId(response.data.session_id || null);\n    } catch (err) {\n      var _err$response5, _err$response5$data;\n      setError(((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.detail) || 'Failed to upload file');\n      console.error('Upload error:', err);\n    } finally {\n      setLoading(prev => ({\n        ...prev,\n        upload: false\n      }));\n      // Reset file input\n      event.target.value = '';\n    }\n  };\n  const handleApplyApproved = async () => {\n    if (!lastUploadedFile) {\n      alert('No previously uploaded file found. Please upload a reviewed Excel first.');\n      return;\n    }\n    if (!window.confirm('This will apply approved dates to the source DB. Proceed?')) return;\n    try {\n      setLoading(prev => ({\n        ...prev,\n        apply: true\n      }));\n      setError(null);\n      setApplyResult(null);\n      const formData = new FormData();\n      formData.append('file', lastUploadedFile);\n      if (lastUploadedSessionId) {\n        // attach session id as a query param\n      }\n      const url = lastUploadedSessionId ? `/phase4/search/apply-approved-dates?session_id=${encodeURIComponent(lastUploadedSessionId)}` : '/phase4/search/apply-approved-dates';\n      const response = await apiClient.post(url, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      setApplyResult(response.data);\n      setSuccessMessage(`Applied: ${response.data.applied}, Failed: ${response.data.failed_count}`);\n\n      // Refresh sessions list after apply\n      fetchSearchSessions();\n    } catch (err) {\n      var _err$response6, _err$response6$data;\n      setError(((_err$response6 = err.response) === null || _err$response6 === void 0 ? void 0 : (_err$response6$data = _err$response6.data) === null || _err$response6$data === void 0 ? void 0 : _err$response6$data.detail) || 'Failed to apply approved dates');\n      console.error('Apply error:', err);\n    } finally {\n      setLoading(prev => ({\n        ...prev,\n        apply: false\n      }));\n    }\n  };\n  const toggleCollectionSelection = collection => {\n    setSelectedCollections(prev => prev.includes(collection) ? prev.filter(c => c !== collection) : [...prev, collection]);\n  };\n  const selectAllCollections = () => {\n    setSelectedCollections(availableCollections);\n  };\n  const clearCollections = () => {\n    setSelectedCollections([]);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-b border-gray-200 pb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-gray-900 flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(Search, {\n          className: \"h-6 w-6 text-blue-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 11\n        }, this), \"Date Search & Review\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-600 mt-1\",\n        children: \"Find missing dates, export for review, and manage AI-powered date extraction\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 7\n    }, this), successMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n        className: \"h-5 w-5 text-green-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-green-800\",\n        children: successMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 9\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n        className: \"h-5 w-5 text-red-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-red-800\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setError(null),\n        className: \"ml-auto text-red-600 hover:text-red-800\",\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white border border-gray-200 rounded-lg p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold text-gray-900 mb-3\",\n        children: \"Select Collections\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2 mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: selectAllCollections,\n          className: \"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200\",\n          children: \"Select All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: clearCollections,\n          className: \"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200\",\n          children: \"Clear All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm text-gray-600 py-1\",\n          children: [selectedCollections.length, \" of \", availableCollections.length, \" selected\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-4 gap-2 max-h-32 overflow-y-auto\",\n        children: availableCollections.map(collection => /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"flex items-center gap-2 cursor-pointer\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: selectedCollections.includes(collection),\n            onChange: () => toggleCollectionSelection(collection),\n            className: \"rounded border-gray-300\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 505,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm\",\n            children: collection\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 15\n          }, this)]\n        }, collection, true, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 7\n    }, this), currentOperation && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-blue-50 border border-blue-200 rounded-lg p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-blue-900\",\n          children: [currentOperation.type === 'scan' ? 'Scanning Collections' : 'AI Date Search', \" in Progress\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 13\n        }, this), currentOperation.status === 'running' && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: stopCurrentOperation,\n          disabled: loading.stop,\n          className: \"flex items-center gap-2 px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50\",\n          children: [/*#__PURE__*/_jsxDEV(StopCircle, {\n            className: \"h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 17\n          }, this), loading.stop ? 'Stopping...' : 'Stop']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full bg-gray-200 rounded-full h-2\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-600 h-2 rounded-full transition-all duration-300\",\n            style: {\n              width: `${progress.progress}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 539,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-blue-800\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Progress: \", progress.progress.toFixed(1), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 15\n          }, this), progress.current_collection && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Current: \", progress.current_collection]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 549,\n            columnNumber: 17\n          }, this), progress.current_statute && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Processing: \", progress.current_statute]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 552,\n            columnNumber: 17\n          }, this), progress.collections_processed && progress.total_collections && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Collections: \", progress.collections_processed, \"/\", progress.total_collections]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 17\n          }, this), progress.processed_count && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Documents Processed: \", progress.processed_count]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 558,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 519,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startScanMissingDates,\n        disabled: loading.scan || (currentOperation === null || currentOperation === void 0 ? void 0 : currentOperation.status) === 'running' || selectedCollections.length === 0,\n        className: \"flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\",\n        children: [loading.scan ? /*#__PURE__*/_jsxDEV(RefreshCw, {\n          className: \"h-5 w-5 animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Search, {\n          className: \"h-5 w-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: loading.scan ? 'Scanning...' : 'Scan Missing Dates'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 578,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: exportMissingDates,\n        disabled: loading.export || (currentOperation === null || currentOperation === void 0 ? void 0 : currentOperation.status) === 'running' || selectedCollections.length === 0,\n        className: \"flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed\",\n        children: [loading.export ? /*#__PURE__*/_jsxDEV(RefreshCw, {\n          className: \"h-5 w-5 animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Download, {\n          className: \"h-5 w-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: loading.export ? 'Exporting...' : 'Export to Excel'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 592,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 582,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startAISearch,\n        disabled: loading.aiSearch || (currentOperation === null || currentOperation === void 0 ? void 0 : currentOperation.status) === 'running' || selectedCollections.length === 0,\n        className: \"flex items-center justify-center gap-2 px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed\",\n        children: [loading.aiSearch ? /*#__PURE__*/_jsxDEV(RefreshCw, {\n          className: \"h-5 w-5 animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 602,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Brain, {\n          className: \"h-5 w-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: loading.aiSearch ? 'Searching...' : 'AI Date Search'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 606,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"flex items-center justify-center gap-2 px-4 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 cursor-pointer\",\n        children: [loading.upload ? /*#__PURE__*/_jsxDEV(RefreshCw, {\n          className: \"h-5 w-5 animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 612,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Upload, {\n          className: \"h-5 w-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: loading.upload ? 'Uploading...' : 'Upload Reviewed'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 616,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \".xlsx,.xls\",\n          onChange: handleFileUpload,\n          disabled: loading.upload,\n          className: \"hidden\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 610,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleApplyApproved,\n        disabled: loading.apply || !lastUploadedFile,\n        className: \"flex items-center justify-center gap-2 px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed\",\n        children: [loading.apply ? /*#__PURE__*/_jsxDEV(RefreshCw, {\n          className: \"h-5 w-5 animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 632,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(CheckCircle, {\n          className: \"h-5 w-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 634,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: loading.apply ? 'Applying...' : 'Apply Approved'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 636,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 566,\n      columnNumber: 7\n    }, this), scanResults && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white border border-gray-200 rounded-lg p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(FileSpreadsheet, {\n          className: \"h-5 w-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 644,\n          columnNumber: 13\n        }, this), \"Scan Results\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 643,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 p-3 rounded\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-bold text-gray-900\",\n            children: scanResults.summary.total_documents.toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 651,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-600\",\n            children: \"Total Documents\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 652,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 650,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-red-50 p-3 rounded\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-bold text-red-900\",\n            children: scanResults.summary.documents_missing_dates.toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 655,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-red-600\",\n            children: \"Missing Dates\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 656,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 654,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-green-50 p-3 rounded\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-bold text-green-900\",\n            children: scanResults.summary.documents_with_dates.toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 659,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-green-600\",\n            children: \"With Dates\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 660,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 658,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-50 p-3 rounded\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-bold text-blue-900\",\n            children: [scanResults.summary.missing_percentage.toFixed(1), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 663,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-blue-600\",\n            children: \"Missing Percentage\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 664,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 649,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"font-medium text-gray-900 mb-3\",\n          children: \"Collection Breakdown\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 670,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-x-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"min-w-full border border-gray-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"bg-gray-50\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-sm font-medium text-gray-900\",\n                  children: \"Collection\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 675,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-sm font-medium text-gray-900\",\n                  children: \"Total\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 676,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-sm font-medium text-gray-900\",\n                  children: \"Missing\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 677,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-sm font-medium text-gray-900\",\n                  children: \"%\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 678,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 674,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 673,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: Object.entries(scanResults.collection_breakdown).map(([collection, data]) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"border-t border-gray-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-sm\",\n                  children: collection\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 684,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-sm\",\n                  children: data.total_documents.toLocaleString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 685,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-sm text-red-600\",\n                  children: data.missing_dates.toLocaleString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 686,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-sm\",\n                  children: [data.missing_percentage.toFixed(1), \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 687,\n                  columnNumber: 23\n                }, this)]\n              }, collection, true, {\n                fileName: _jsxFileName,\n                lineNumber: 683,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 681,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 672,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 671,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 669,\n        columnNumber: 11\n      }, this), scanResults.sample_missing.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"font-medium text-gray-900 mb-3\",\n          children: \"Sample Missing Documents\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 698,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: scanResults.sample_missing.slice(0, 5).map((doc, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-50 p-3 rounded text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-medium\",\n              children: doc.Statute_Name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 702,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-gray-600\",\n              children: [doc.Province, \" \\u2022 \", doc.collection]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 703,\n              columnNumber: 21\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 701,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 699,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 697,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 642,\n      columnNumber: 9\n    }, this), searchSessions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white border border-gray-200 rounded-lg p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-gray-900 flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Eye, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 717,\n            columnNumber: 15\n          }, this), \"Recent Search Sessions\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 716,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: clearSearchSessions,\n            disabled: loading.clearSessions,\n            className: \"flex items-center gap-2 px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 disabled:opacity-50\",\n            children: [loading.clearSessions ? /*#__PURE__*/_jsxDEV(RefreshCw, {\n              className: \"h-4 w-4 animate-spin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 727,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(AlertCircle, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 729,\n              columnNumber: 19\n            }, this), \"Clear All\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 721,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: fetchSearchSessions,\n            className: \"flex items-center gap-2 px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200\",\n            children: [/*#__PURE__*/_jsxDEV(RefreshCw, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 737,\n              columnNumber: 17\n            }, this), \"Refresh\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 733,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 720,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 715,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full border border-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-50\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 text-left text-sm font-medium text-gray-900\",\n                children: \"Session ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 747,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 text-left text-sm font-medium text-gray-900\",\n                children: \"Created\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 748,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 text-left text-sm font-medium text-gray-900\",\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 749,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 text-left text-sm font-medium text-gray-900\",\n                children: \"Documents\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 750,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 text-left text-sm font-medium text-gray-900\",\n                children: \"AI Processed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 751,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 text-left text-sm font-medium text-gray-900\",\n                children: \"High Confidence\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 752,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 text-left text-sm font-medium text-gray-900\",\n                children: \"Actions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 753,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 746,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 745,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: searchSessions.slice(0, 10).map(session => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"border-t border-gray-200\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-4 py-2 text-sm font-mono\",\n                children: session.session_label || session.session_id\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 759,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-4 py-2 text-sm\",\n                children: session.created_at_local || session.created_at\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 760,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-4 py-2 text-sm\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `px-2 py-1 rounded text-xs ${session.status === 'completed' ? 'bg-green-100 text-green-800' : session.status === 'pending_review' ? 'bg-yellow-100 text-yellow-800' : 'bg-gray-100 text-gray-800'}`,\n                  children: session.status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 762,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 761,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-4 py-2 text-sm\",\n                children: session.total_documents\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 770,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-4 py-2 text-sm\",\n                children: session.metadata.ai_processed\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 771,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-4 py-2 text-sm\",\n                children: session.metadata.high_confidence\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 772,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-4 py-2 text-sm\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => viewSearchResults(session.session_id),\n                    disabled: loading.viewResults,\n                    className: \"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 disabled:opacity-50 flex items-center gap-1\",\n                    title: \"Download AI search results as Excel file\",\n                    children: [/*#__PURE__*/_jsxDEV(FileSpreadsheet, {\n                      className: \"h-3 w-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 781,\n                      columnNumber: 27\n                    }, this), \"Excel\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 775,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => deleteSearchSession(session.session_id),\n                    className: \"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200\",\n                    title: \"Delete this session\",\n                    children: \"Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 784,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 774,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 773,\n                columnNumber: 21\n              }, this)]\n            }, session.session_id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 758,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 756,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 744,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 743,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 714,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 448,\n    columnNumber: 5\n  }, this);\n};\n_s(DateSearchTab, \"GL9yPs9eD/zlqYfsbeoh9OARv3w=\");\n_c = DateSearchTab;\nexport default DateSearchTab;\nvar _c;\n$RefreshReg$(_c, \"DateSearchTab\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Search","Download","Upload","FileSpreadsheet","Brain","CheckCircle","AlertCircle","RefreshCw","StopCircle","Eye","apiClient","jsxDEV","_jsxDEV","DateSearchTab","_s","availableCollections","setAvailableCollections","selectedCollections","setSelectedCollections","scanResults","setScanResults","searchSessions","setSearchSessions","currentOperation","setCurrentOperation","progress","setProgress","loading","setLoading","error","setError","successMessage","setSuccessMessage","lastUploadedFile","setLastUploadedFile","lastUploadedSessionId","setLastUploadedSessionId","applyResult","setApplyResult","eventSourceRef","fetchAvailableCollections","fetchSearchSessions","timer","setTimeout","clearTimeout","current","close","response","get","data","collections","err","console","sessions","viewSearchResults","sessionId","prev","viewResults","responseType","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","contentDisposition","headers","filename","filenameMatch","match","replace","download","body","appendChild","click","removeChild","revokeObjectURL","clearSearchSessions","window","confirm","clearSessions","delete","alert","cleared_sessions","deleteSearchSession","filter","s","session_id","setupProgressTracking","operationId","eventSource","EventSource","onmessage","event","JSON","parse","log","current_collection","collections_processed","total_collections","current_statute","processed_count","results","status","onerror","startScanMissingDates","scan","post","length","scanId","scan_id","id","_err$response","_err$response$data","detail","exportMissingDates","export","a","Date","toISOString","split","_err$response2","_err$response2$data","startAISearch","aiSearch","use_ai","searchId","search_id","_err$response3","_err$response3$data","stopCurrentOperation","stop","_err$response4","_err$response4$data","handleFileUpload","_event$target$files","file","target","files","upload","formData","FormData","append","approved_dates","_err$response5","_err$response5$data","value","handleApplyApproved","apply","encodeURIComponent","applied","failed_count","_err$response6","_err$response6$data","toggleCollectionSelection","collection","includes","c","selectAllCollections","clearCollections","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","checked","onChange","disabled","style","width","toFixed","accept","summary","total_documents","toLocaleString","documents_missing_dates","documents_with_dates","missing_percentage","Object","entries","collection_breakdown","missing_dates","sample_missing","slice","doc","index","Statute_Name","Province","session","session_label","created_at_local","created_at","metadata","ai_processed","high_confidence","title","_c","$RefreshReg$"],"sources":["D:/DigiFloat/LawChronicle/frontend/src/components/DateSearchTab.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Search, Download, Upload, FileSpreadsheet, Brain, CheckCircle, AlertCircle, RefreshCw, StopCircle, Eye } from 'lucide-react';\r\nimport apiClient from '../services/authService';\r\n\r\ninterface ScanResults {\r\n  scan_id: string;\r\n  collections_scanned: string[];\r\n  summary: {\r\n    total_documents: number;\r\n    documents_with_dates: number;\r\n    documents_missing_dates: number;\r\n    missing_percentage: number;\r\n  };\r\n  collection_breakdown: Record<string, {\r\n    total_documents: number;\r\n    missing_dates: number;\r\n    missing_percentage: number;\r\n  }>;\r\n  sample_missing: Array<{\r\n    _id: string;\r\n    Statute_Name: string;\r\n    Province: string;\r\n    collection: string;\r\n  }>;\r\n}\r\n\r\ninterface SearchSession {\r\n  session_id: string;\r\n  created_at: string;\r\n  session_label?: string;\r\n  created_at_local?: string;\r\n  status: string;\r\n  total_documents: number;\r\n  metadata: {\r\n    source_collections: string[];\r\n    ai_processed: number;\r\n    high_confidence: number;\r\n  };\r\n}\r\n\r\ninterface ProgressData {\r\n  progress: number;\r\n  current_collection?: string;\r\n  collections_processed?: number;\r\n  total_collections?: number;\r\n  current_statute?: string;\r\n  processed_count?: number;\r\n}\r\n\r\nconst DateSearchTab: React.FC = () => {\r\n  const [availableCollections, setAvailableCollections] = useState<string[]>([]);\r\n  const [selectedCollections, setSelectedCollections] = useState<string[]>([]);\r\n  const [scanResults, setScanResults] = useState<ScanResults | null>(null);\r\n  const [searchSessions, setSearchSessions] = useState<SearchSession[]>([]);\r\n  const [currentOperation, setCurrentOperation] = useState<{\r\n    type: 'scan' | 'search';\r\n    id: string;\r\n    status: 'running' | 'completed' | 'error' | 'stopped';\r\n  } | null>(null);\r\n  const [progress, setProgress] = useState<ProgressData>({ progress: 0 });\r\n  const [loading, setLoading] = useState<Record<string, boolean>>({});\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [successMessage, setSuccessMessage] = useState<string | null>(null);\r\n  const [lastUploadedFile, setLastUploadedFile] = useState<File | null>(null);\r\n  const [lastUploadedSessionId, setLastUploadedSessionId] = useState<string | null>(null);\r\n  const [applyResult, setApplyResult] = useState<any | null>(null);\r\n  \r\n  const eventSourceRef = useRef<EventSource | null>(null);\r\n\r\n  useEffect(() => {\r\n    fetchAvailableCollections();\r\n    fetchSearchSessions();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Auto-dismiss messages\r\n    if (successMessage) {\r\n      const timer = setTimeout(() => setSuccessMessage(null), 5000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [successMessage]);\r\n\r\n  useEffect(() => {\r\n    // Cleanup EventSource on unmount\r\n    return () => {\r\n      if (eventSourceRef.current) {\r\n        eventSourceRef.current.close();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const fetchAvailableCollections = async () => {\r\n    try {\r\n      const response = await apiClient.get('/phase4/search/collections');\r\n      setAvailableCollections(response.data.collections);\r\n      setSelectedCollections(response.data.collections); // Select all by default\r\n    } catch (err) {\r\n      setError('Failed to fetch collections');\r\n      console.error('Fetch collections error:', err);\r\n    }\r\n  };\r\n\r\n  const fetchSearchSessions = async () => {\r\n    try {\r\n      const response = await apiClient.get('/phase4/search/search-sessions');\r\n      setSearchSessions(response.data.sessions);\r\n    } catch (err) {\r\n      console.error('Fetch search sessions error:', err);\r\n    }\r\n  };\r\n\r\n  const viewSearchResults = async (sessionId: string) => {\r\n    try {\r\n      setLoading(prev => ({ ...prev, viewResults: true }));\r\n      const response = await apiClient.get(`/phase4/search/search-results/${sessionId}`, {\r\n        responseType: 'blob'\r\n      });\r\n      \r\n      // Create download link for Excel file\r\n      const blob = new Blob([response.data], { \r\n        type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' \r\n      });\r\n      const url = URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      \r\n      // Extract filename from Content-Disposition header or use default\r\n      const contentDisposition = response.headers['content-disposition'];\r\n      let filename = `search-results-${sessionId}.xlsx`;\r\n      if (contentDisposition) {\r\n        const filenameMatch = contentDisposition.match(/filename=([^;]+)/);\r\n        if (filenameMatch) {\r\n          filename = filenameMatch[1].replace(/\"/g, '');\r\n        }\r\n      }\r\n      \r\n      link.download = filename;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      URL.revokeObjectURL(url);\r\n      \r\n    } catch (err) {\r\n      setError('Failed to download search results');\r\n      console.error('View search results error:', err);\r\n    } finally {\r\n      setLoading(prev => ({ ...prev, viewResults: false }));\r\n    }\r\n  };\r\n\r\n  const clearSearchSessions = async () => {\r\n    if (!window.confirm('Are you sure you want to clear all search session history? This action cannot be undone.')) {\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setLoading(prev => ({ ...prev, clearSessions: true }));\r\n      const response = await apiClient.delete('/phase4/search/search-sessions');\r\n      setSearchSessions([]);\r\n      alert(`Cleared ${response.data.cleared_sessions} search sessions`);\r\n    } catch (err) {\r\n      setError('Failed to clear search sessions');\r\n      console.error('Clear search sessions error:', err);\r\n    } finally {\r\n      setLoading(prev => ({ ...prev, clearSessions: false }));\r\n    }\r\n  };\r\n\r\n  const deleteSearchSession = async (sessionId: string) => {\r\n    if (!window.confirm(`Are you sure you want to delete search session ${sessionId}?`)) {\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      await apiClient.delete(`/phase4/search/search-sessions/${sessionId}`);\r\n      setSearchSessions(prev => prev.filter(s => s.session_id !== sessionId));\r\n    } catch (err) {\r\n      setError('Failed to delete search session');\r\n      console.error('Delete search session error:', err);\r\n    }\r\n  };\r\n\r\n  const setupProgressTracking = (operationId: string) => {\r\n    if (eventSourceRef.current) {\r\n      eventSourceRef.current.close();\r\n    }\r\n\r\n    const eventSource = new EventSource(`http://localhost:8000/api/v1/phase4/search/progress-stream/${operationId}`);\r\n    eventSourceRef.current = eventSource;\r\n\r\n    eventSource.onmessage = (event) => {\r\n      try {\r\n        const data = JSON.parse(event.data);\r\n        \r\n        switch (data.type) {\r\n          case 'connected':\r\n            console.log('SSE connected for operation:', operationId);\r\n            break;\r\n          \r\n          case 'scan_progress':\r\n          case 'search_progress':\r\n            setProgress({\r\n              progress: data.progress || 0,\r\n              current_collection: data.current_collection,\r\n              collections_processed: data.collections_processed,\r\n              total_collections: data.total_collections,\r\n              current_statute: data.current_statute,\r\n              processed_count: data.processed_count\r\n            });\r\n            break;\r\n          \r\n          case 'scan_completed':\r\n            setScanResults(data.results);\r\n            setCurrentOperation(prev => prev ? { ...prev, status: 'completed' } : null);\r\n            setProgress({ progress: 100 });\r\n            setSuccessMessage('Scan completed successfully!');\r\n            eventSource.close();\r\n            break;\r\n          \r\n          case 'search_completed':\r\n            setCurrentOperation(prev => prev ? { ...prev, status: 'completed' } : null);\r\n            setProgress({ progress: 100 });\r\n            setSuccessMessage(`AI search completed! Session ID: ${data.session_id}`);\r\n            fetchSearchSessions(); // Refresh sessions\r\n            eventSource.close();\r\n            break;\r\n          \r\n          case 'scan_error':\r\n          case 'search_error':\r\n            setCurrentOperation(prev => prev ? { ...prev, status: 'error' } : null);\r\n            setError(data.error || 'Operation failed');\r\n            eventSource.close();\r\n            break;\r\n          \r\n          case 'operation_stopped':\r\n            setCurrentOperation(prev => prev ? { ...prev, status: 'stopped' } : null);\r\n            setSuccessMessage('Operation stopped successfully');\r\n            eventSource.close();\r\n            break;\r\n        }\r\n      } catch (err) {\r\n        console.error('SSE parsing error:', err);\r\n      }\r\n    };\r\n\r\n    eventSource.onerror = (error) => {\r\n      console.error('SSE error:', error);\r\n      eventSource.close();\r\n    };\r\n  };\r\n\r\n  const startScanMissingDates = async () => {\r\n    try {\r\n      setLoading(prev => ({ ...prev, scan: true }));\r\n      setError(null);\r\n      \r\n      const response = await apiClient.post('/phase4/search/scan-missing-dates', {\r\n        collections: selectedCollections.length > 0 ? selectedCollections : null\r\n      });\r\n      \r\n      const scanId = response.data.scan_id;\r\n      setCurrentOperation({ type: 'scan', id: scanId, status: 'running' });\r\n      setProgress({ progress: 0 });\r\n      \r\n      // Setup progress tracking\r\n      setupProgressTracking(scanId);\r\n      \r\n    } catch (err: any) {\r\n      setError(err.response?.data?.detail || 'Failed to start scan');\r\n      console.error('Start scan error:', err);\r\n    } finally {\r\n      setLoading(prev => ({ ...prev, scan: false }));\r\n    }\r\n  };\r\n\r\n  const exportMissingDates = async () => {\r\n    try {\r\n      setLoading(prev => ({ ...prev, export: true }));\r\n      setError(null);\r\n      \r\n      const response = await apiClient.post('/phase4/search/export-missing-dates', {\r\n        collections: selectedCollections.length > 0 ? selectedCollections : null\r\n      }, {\r\n        responseType: 'blob'\r\n      });\r\n      \r\n      // Create download link\r\n      const blob = new Blob([response.data], { \r\n        type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' \r\n      });\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      \r\n      // Extract filename from Content-Disposition header or use default\r\n      const contentDisposition = response.headers['content-disposition'];\r\n      let filename = `missing_dates_${new Date().toISOString().split('T')[0]}.xlsx`; // fallback\r\n      if (contentDisposition) {\r\n        const filenameMatch = contentDisposition.match(/filename=([^;]+)/);\r\n        if (filenameMatch) {\r\n          filename = filenameMatch[1].replace(/\"/g, ''); // remove quotes\r\n        }\r\n      }\r\n      \r\n      a.download = filename;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      window.URL.revokeObjectURL(url);\r\n      document.body.removeChild(a);\r\n      \r\n      setSuccessMessage('Excel file downloaded successfully!');\r\n      \r\n    } catch (err: any) {\r\n      setError(err.response?.data?.detail || 'Failed to export missing dates');\r\n      console.error('Export error:', err);\r\n    } finally {\r\n      setLoading(prev => ({ ...prev, export: false }));\r\n    }\r\n  };\r\n\r\n  const startAISearch = async () => {\r\n    try {\r\n      setLoading(prev => ({ ...prev, aiSearch: true }));\r\n      setError(null);\r\n      \r\n      const response = await apiClient.post('/phase4/search/search-dates-ai', {\r\n        collections: selectedCollections.length > 0 ? selectedCollections : null,\r\n        use_ai: true\r\n        // max_documents removed - process all missing dates like reference implementation\r\n      });\r\n      \r\n      const searchId = response.data.search_id;\r\n      setCurrentOperation({ type: 'search', id: searchId, status: 'running' });\r\n      setProgress({ progress: 0 });\r\n      \r\n      // Setup progress tracking\r\n      setupProgressTracking(searchId);\r\n      \r\n    } catch (err: any) {\r\n      setError(err.response?.data?.detail || 'Failed to start AI search');\r\n      console.error('Start AI search error:', err);\r\n    } finally {\r\n      setLoading(prev => ({ ...prev, aiSearch: false }));\r\n    }\r\n  };\r\n\r\n  const stopCurrentOperation = async () => {\r\n    if (!currentOperation) return;\r\n    \r\n    try {\r\n      setLoading(prev => ({ ...prev, stop: true }));\r\n      await apiClient.post(`/phase4/search/stop-operation/${currentOperation.id}`);\r\n    } catch (err: any) {\r\n      setError(err.response?.data?.detail || 'Failed to stop operation');\r\n      console.error('Stop operation error:', err);\r\n    } finally {\r\n      setLoading(prev => ({ ...prev, stop: false }));\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    try {\r\n      setLoading(prev => ({ ...prev, upload: true }));\r\n      setError(null);\r\n      \r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n      \r\n      const response = await apiClient.post('/phase4/search/upload-reviewed-excel', formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' }\r\n      });\r\n      \r\n  setSuccessMessage(`Upload successful! ${response.data.approved_dates} approved dates found.`);\r\n  // Save uploaded file and session id for two-step apply\r\n  setLastUploadedFile(file);\r\n  setLastUploadedSessionId(response.data.session_id || null);\r\n      \r\n    } catch (err: any) {\r\n      setError(err.response?.data?.detail || 'Failed to upload file');\r\n      console.error('Upload error:', err);\r\n    } finally {\r\n      setLoading(prev => ({ ...prev, upload: false }));\r\n      // Reset file input\r\n      event.target.value = '';\r\n    }\r\n  };\r\n\r\n  const handleApplyApproved = async () => {\r\n    if (!lastUploadedFile) {\r\n      alert('No previously uploaded file found. Please upload a reviewed Excel first.');\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm('This will apply approved dates to the source DB. Proceed?')) return;\r\n\r\n    try {\r\n      setLoading(prev => ({ ...prev, apply: true }));\r\n      setError(null);\r\n      setApplyResult(null);\r\n\r\n      const formData = new FormData();\r\n      formData.append('file', lastUploadedFile);\r\n      if (lastUploadedSessionId) {\r\n        // attach session id as a query param\r\n      }\r\n\r\n      const url = lastUploadedSessionId\r\n        ? `/phase4/search/apply-approved-dates?session_id=${encodeURIComponent(lastUploadedSessionId)}`\r\n        : '/phase4/search/apply-approved-dates';\r\n\r\n      const response = await apiClient.post(url, formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' }\r\n      });\r\n\r\n      setApplyResult(response.data);\r\n      setSuccessMessage(`Applied: ${response.data.applied}, Failed: ${response.data.failed_count}`);\r\n\r\n      // Refresh sessions list after apply\r\n      fetchSearchSessions();\r\n    } catch (err: any) {\r\n      setError(err.response?.data?.detail || 'Failed to apply approved dates');\r\n      console.error('Apply error:', err);\r\n    } finally {\r\n      setLoading(prev => ({ ...prev, apply: false }));\r\n    }\r\n  };\r\n\r\n  const toggleCollectionSelection = (collection: string) => {\r\n    setSelectedCollections(prev =>\r\n      prev.includes(collection)\r\n        ? prev.filter(c => c !== collection)\r\n        : [...prev, collection]\r\n    );\r\n  };\r\n\r\n  const selectAllCollections = () => {\r\n    setSelectedCollections(availableCollections);\r\n  };\r\n\r\n  const clearCollections = () => {\r\n    setSelectedCollections([]);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"border-b border-gray-200 pb-4\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900 flex items-center gap-2\">\r\n          <Search className=\"h-6 w-6 text-blue-600\" />\r\n          Date Search & Review\r\n        </h2>\r\n        <p className=\"text-sm text-gray-600 mt-1\">\r\n          Find missing dates, export for review, and manage AI-powered date extraction\r\n        </p>\r\n      </div>\r\n\r\n      {/* Success Message */}\r\n      {successMessage && (\r\n        <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-2\">\r\n          <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n          <span className=\"text-green-800\">{successMessage}</span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Error Message */}\r\n      {error && (\r\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-2\">\r\n          <AlertCircle className=\"h-5 w-5 text-red-600\" />\r\n          <span className=\"text-red-800\">{error}</span>\r\n          <button\r\n            onClick={() => setError(null)}\r\n            className=\"ml-auto text-red-600 hover:text-red-800\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Collections Selection */}\r\n      <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">Select Collections</h3>\r\n        <div className=\"flex gap-2 mb-3\">\r\n          <button\r\n            onClick={selectAllCollections}\r\n            className=\"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200\"\r\n          >\r\n            Select All\r\n          </button>\r\n          <button\r\n            onClick={clearCollections}\r\n            className=\"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200\"\r\n          >\r\n            Clear All\r\n          </button>\r\n          <span className=\"text-sm text-gray-600 py-1\">\r\n            {selectedCollections.length} of {availableCollections.length} selected\r\n          </span>\r\n        </div>\r\n        <div className=\"grid grid-cols-4 gap-2 max-h-32 overflow-y-auto\">\r\n          {availableCollections.map(collection => (\r\n            <label key={collection} className=\"flex items-center gap-2 cursor-pointer\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={selectedCollections.includes(collection)}\r\n                onChange={() => toggleCollectionSelection(collection)}\r\n                className=\"rounded border-gray-300\"\r\n              />\r\n              <span className=\"text-sm\">{collection}</span>\r\n            </label>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Current Operation Progress */}\r\n      {currentOperation && (\r\n        <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <h3 className=\"text-lg font-semibold text-blue-900\">\r\n              {currentOperation.type === 'scan' ? 'Scanning Collections' : 'AI Date Search'} in Progress\r\n            </h3>\r\n            {currentOperation.status === 'running' && (\r\n              <button\r\n                onClick={stopCurrentOperation}\r\n                disabled={loading.stop}\r\n                className=\"flex items-center gap-2 px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50\"\r\n              >\r\n                <StopCircle className=\"h-4 w-4\" />\r\n                {loading.stop ? 'Stopping...' : 'Stop'}\r\n              </button>\r\n            )}\r\n          </div>\r\n          \r\n          <div className=\"space-y-2\">\r\n            {/* Progress Bar */}\r\n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n              <div \r\n                className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\r\n                style={{ width: `${progress.progress}%` }}\r\n              />\r\n            </div>\r\n            \r\n            {/* Progress Details */}\r\n            <div className=\"text-sm text-blue-800\">\r\n              <div>Progress: {progress.progress.toFixed(1)}%</div>\r\n              {progress.current_collection && (\r\n                <div>Current: {progress.current_collection}</div>\r\n              )}\r\n              {progress.current_statute && (\r\n                <div>Processing: {progress.current_statute}</div>\r\n              )}\r\n              {progress.collections_processed && progress.total_collections && (\r\n                <div>Collections: {progress.collections_processed}/{progress.total_collections}</div>\r\n              )}\r\n              {progress.processed_count && (\r\n                <div>Documents Processed: {progress.processed_count}</div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Action Buttons */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        {/* Scan Missing Dates */}\r\n        <button\r\n          onClick={startScanMissingDates}\r\n          disabled={loading.scan || currentOperation?.status === 'running' || selectedCollections.length === 0}\r\n          className=\"flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n        >\r\n          {loading.scan ? (\r\n            <RefreshCw className=\"h-5 w-5 animate-spin\" />\r\n          ) : (\r\n            <Search className=\"h-5 w-5\" />\r\n          )}\r\n          <span>{loading.scan ? 'Scanning...' : 'Scan Missing Dates'}</span>\r\n        </button>\r\n\r\n        {/* Export to Excel */}\r\n        <button\r\n          onClick={exportMissingDates}\r\n          disabled={loading.export || currentOperation?.status === 'running' || selectedCollections.length === 0}\r\n          className=\"flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n        >\r\n          {loading.export ? (\r\n            <RefreshCw className=\"h-5 w-5 animate-spin\" />\r\n          ) : (\r\n            <Download className=\"h-5 w-5\" />\r\n          )}\r\n          <span>{loading.export ? 'Exporting...' : 'Export to Excel'}</span>\r\n        </button>\r\n\r\n        {/* AI Date Search */}\r\n        <button\r\n          onClick={startAISearch}\r\n          disabled={loading.aiSearch || currentOperation?.status === 'running' || selectedCollections.length === 0}\r\n          className=\"flex items-center justify-center gap-2 px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n        >\r\n          {loading.aiSearch ? (\r\n            <RefreshCw className=\"h-5 w-5 animate-spin\" />\r\n          ) : (\r\n            <Brain className=\"h-5 w-5\" />\r\n          )}\r\n          <span>{loading.aiSearch ? 'Searching...' : 'AI Date Search'}</span>\r\n        </button>\r\n\r\n        {/* Upload Reviewed Excel */}\r\n        <label className=\"flex items-center justify-center gap-2 px-4 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 cursor-pointer\">\r\n          {loading.upload ? (\r\n            <RefreshCw className=\"h-5 w-5 animate-spin\" />\r\n          ) : (\r\n            <Upload className=\"h-5 w-5\" />\r\n          )}\r\n          <span>{loading.upload ? 'Uploading...' : 'Upload Reviewed'}</span>\r\n          <input\r\n            type=\"file\"\r\n            accept=\".xlsx,.xls\"\r\n            onChange={handleFileUpload}\r\n            disabled={loading.upload}\r\n            className=\"hidden\"\r\n          />\r\n        </label>\r\n        {/* Apply Approved (two-step) */}\r\n        <button\r\n          onClick={handleApplyApproved}\r\n          disabled={loading.apply || !lastUploadedFile}\r\n          className=\"flex items-center justify-center gap-2 px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n        >\r\n          {loading.apply ? (\r\n            <RefreshCw className=\"h-5 w-5 animate-spin\" />\r\n          ) : (\r\n            <CheckCircle className=\"h-5 w-5\" />\r\n          )}\r\n          <span>{loading.apply ? 'Applying...' : 'Apply Approved'}</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Scan Results */}\r\n      {scanResults && (\r\n        <div className=\"bg-white border border-gray-200 rounded-lg p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2\">\r\n            <FileSpreadsheet className=\"h-5 w-5\" />\r\n            Scan Results\r\n          </h3>\r\n          \r\n          {/* Summary */}\r\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\r\n            <div className=\"bg-gray-50 p-3 rounded\">\r\n              <div className=\"text-2xl font-bold text-gray-900\">{scanResults.summary.total_documents.toLocaleString()}</div>\r\n              <div className=\"text-sm text-gray-600\">Total Documents</div>\r\n            </div>\r\n            <div className=\"bg-red-50 p-3 rounded\">\r\n              <div className=\"text-2xl font-bold text-red-900\">{scanResults.summary.documents_missing_dates.toLocaleString()}</div>\r\n              <div className=\"text-sm text-red-600\">Missing Dates</div>\r\n            </div>\r\n            <div className=\"bg-green-50 p-3 rounded\">\r\n              <div className=\"text-2xl font-bold text-green-900\">{scanResults.summary.documents_with_dates.toLocaleString()}</div>\r\n              <div className=\"text-sm text-green-600\">With Dates</div>\r\n            </div>\r\n            <div className=\"bg-blue-50 p-3 rounded\">\r\n              <div className=\"text-2xl font-bold text-blue-900\">{scanResults.summary.missing_percentage.toFixed(1)}%</div>\r\n              <div className=\"text-sm text-blue-600\">Missing Percentage</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Collection Breakdown */}\r\n          <div className=\"mb-6\">\r\n            <h4 className=\"font-medium text-gray-900 mb-3\">Collection Breakdown</h4>\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full border border-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-900\">Collection</th>\r\n                    <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-900\">Total</th>\r\n                    <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-900\">Missing</th>\r\n                    <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-900\">%</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {Object.entries(scanResults.collection_breakdown).map(([collection, data]) => (\r\n                    <tr key={collection} className=\"border-t border-gray-200\">\r\n                      <td className=\"px-4 py-2 text-sm\">{collection}</td>\r\n                      <td className=\"px-4 py-2 text-sm\">{data.total_documents.toLocaleString()}</td>\r\n                      <td className=\"px-4 py-2 text-sm text-red-600\">{data.missing_dates.toLocaleString()}</td>\r\n                      <td className=\"px-4 py-2 text-sm\">{data.missing_percentage.toFixed(1)}%</td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Sample Missing Documents */}\r\n          {scanResults.sample_missing.length > 0 && (\r\n            <div>\r\n              <h4 className=\"font-medium text-gray-900 mb-3\">Sample Missing Documents</h4>\r\n              <div className=\"space-y-2\">\r\n                {scanResults.sample_missing.slice(0, 5).map((doc, index) => (\r\n                  <div key={index} className=\"bg-gray-50 p-3 rounded text-sm\">\r\n                    <div className=\"font-medium\">{doc.Statute_Name}</div>\r\n                    <div className=\"text-gray-600\">{doc.Province}  {doc.collection}</div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Search Sessions */}\r\n      {searchSessions.length > 0 && (\r\n        <div className=\"bg-white border border-gray-200 rounded-lg p-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 flex items-center gap-2\">\r\n              <Eye className=\"h-5 w-5\" />\r\n              Recent Search Sessions\r\n            </h3>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={clearSearchSessions}\r\n                disabled={loading.clearSessions}\r\n                className=\"flex items-center gap-2 px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 disabled:opacity-50\"\r\n              >\r\n                {loading.clearSessions ? (\r\n                  <RefreshCw className=\"h-4 w-4 animate-spin\" />\r\n                ) : (\r\n                  <AlertCircle className=\"h-4 w-4\" />\r\n                )}\r\n                Clear All\r\n              </button>\r\n              <button\r\n                onClick={fetchSearchSessions}\r\n                className=\"flex items-center gap-2 px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200\"\r\n              >\r\n                <RefreshCw className=\"h-4 w-4\" />\r\n                Refresh\r\n              </button>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full border border-gray-200\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-900\">Session ID</th>\r\n                  <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-900\">Created</th>\r\n                  <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-900\">Status</th>\r\n                  <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-900\">Documents</th>\r\n                  <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-900\">AI Processed</th>\r\n                  <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-900\">High Confidence</th>\r\n                  <th className=\"px-4 py-2 text-left text-sm font-medium text-gray-900\">Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {searchSessions.slice(0, 10).map((session) => (\r\n                  <tr key={session.session_id} className=\"border-t border-gray-200\">\r\n                        <td className=\"px-4 py-2 text-sm font-mono\">{session.session_label || session.session_id}</td>\r\n                        <td className=\"px-4 py-2 text-sm\">{session.created_at_local || session.created_at}</td>\r\n                    <td className=\"px-4 py-2 text-sm\">\r\n                      <span className={`px-2 py-1 rounded text-xs ${\r\n                        session.status === 'completed' ? 'bg-green-100 text-green-800' :\r\n                        session.status === 'pending_review' ? 'bg-yellow-100 text-yellow-800' :\r\n                        'bg-gray-100 text-gray-800'\r\n                      }`}>\r\n                        {session.status}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-4 py-2 text-sm\">{session.total_documents}</td>\r\n                    <td className=\"px-4 py-2 text-sm\">{session.metadata.ai_processed}</td>\r\n                    <td className=\"px-4 py-2 text-sm\">{session.metadata.high_confidence}</td>\r\n                    <td className=\"px-4 py-2 text-sm\">\r\n                      <div className=\"flex gap-1\">\r\n                        <button\r\n                          onClick={() => viewSearchResults(session.session_id)}\r\n                          disabled={loading.viewResults}\r\n                          className=\"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 disabled:opacity-50 flex items-center gap-1\"\r\n                          title=\"Download AI search results as Excel file\"\r\n                        >\r\n                          <FileSpreadsheet className=\"h-3 w-3\" />\r\n                          Excel\r\n                        </button>\r\n                        <button\r\n                          onClick={() => deleteSearchSession(session.session_id)}\r\n                          className=\"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200\"\r\n                          title=\"Delete this session\"\r\n                        >\r\n                          Delete\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DateSearchTab;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}