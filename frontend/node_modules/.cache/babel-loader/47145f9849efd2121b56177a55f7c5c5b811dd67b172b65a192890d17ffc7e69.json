{"ast":null,"code":"import _objectSpread from\"D:/DigiFloat/LawChronicle/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Database,Play,Eye,RotateCcw,FileText,BarChart3,CheckCircle,AlertCircle,Loader2,Settings}from'lucide-react';import{useAuth}from'../contexts/AuthContext';import StatuteNameNormalizer from'../components/phase2/StatuteNameNormalizer';import ResultsPreview from'../components/phase2/ResultsPreview';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Phase2=()=>{const{user}=useAuth();const[activeTab,setActiveTab]=useState('overview');const[isNormalizing,setIsNormalizing]=useState(false);const[saveMetadata,setSaveMetadata]=useState(false);const[normalizationResult,setNormalizationResult]=useState(null);const[previewData,setPreviewData]=useState(null);const[statusInfo,setStatusInfo]=useState(null);const[error,setError]=useState(null);const[progressStep,setProgressStep]=useState('');const[progressDetails,setProgressDetails]=useState('');const[processingStats,setProcessingStats]=useState(null);// Configuration state\nconst[config,setConfig]=useState({source_collection:\"raw_statutes\",target_collection:\"normalized_statutes\",database_name:\"Statutes\",sorted_collection:\"sorted_statutes\"});const executeNormalization=async()=>{setIsNormalizing(true);setError(null);setNormalizationResult(null);setProgressStep('Initializing normalization process...');setProgressDetails('Preparing service request and validating configuration');setProcessingStats(null);try{// Step 1: Prepare service request\nsetProgressStep('Preparing normalization request');setProgressDetails(\"Source: \".concat(config.source_collection,\" \\u2192 Target: \").concat(config.target_collection));const sourceDb=config.database_name||\"Statutes\";const targetDb=config.database_name||\"Statutes\";const serviceRequest={source_db:sourceDb,target_db:targetDb,options:{source_collection:config.source_collection,target_collection:config.target_collection,sorted_collection:config.sorted_collection,save_metadata:saveMetadata,batch_size:1000,legacy_compatibility:true,// Enable legacy mode\nsame_database_mode:true,// Allow same database\nactual_database:sourceDb// The actual database name\n}};// Step 2: Send request to service\nsetProgressStep('Sending request to normalization service');setProgressDetails('Connecting to backend service endpoint...');const response=await fetch('/api/v1/phase2/start-normalization',{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('token'))},body:JSON.stringify(serviceRequest)});// Step 3: Process response\nsetProgressStep('Processing service response');setProgressDetails('Analyzing normalization results...');const result=await response.json();if(response.ok){var _result$data;// Step 4: Success handling\nsetProgressStep('Normalization completed successfully!');setProgressDetails(\"Processed statutes and created normalized collection\");// Transform service response to match expected format\nconst transformedResult={success:result.success,message:result.message,metadata:((_result$data=result.data)===null||_result$data===void 0?void 0:_result$data.metadata)||result.data||{},timestamp:result.timestamp,service_based:true,migration_note:\"Using modern service-based normalization\"};setNormalizationResult(transformedResult);// Step 5: Refresh status\nsetProgressStep('Refreshing status dashboard');setProgressDetails('Updating progress indicators...');await getNormalizationStatus();setProgressStep('Ready for next phase');setProgressDetails('Normalization completed successfully - ready to proceed');}else{var _result$detail;throw new Error(((_result$detail=result.detail)===null||_result$detail===void 0?void 0:_result$detail.message)||result.message||'Normalization failed');}}catch(err){setProgressStep('Error occurred during normalization');setProgressDetails(err instanceof Error?err.message:'An unexpected error occurred');setError(err instanceof Error?err.message:'An unexpected error occurred');}finally{setIsNormalizing(false);// Clear progress after a delay\nsetTimeout(()=>{if(!isNormalizing){setProgressStep('');setProgressDetails('');setProcessingStats(null);}},3000);}};const getNormalizationStatus=async()=>{try{const response=await fetch('/api/v1/phase2/normalization-status',{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('token'))},body:JSON.stringify(config)});if(response.ok){const status=await response.json();setStatusInfo(status);}}catch(err){console.error('Failed to get status:',err);}};const previewNormalizedStructure=async()=>{try{// First try the source-based preview (shows what will be normalized)\nconst sourceResponse=await fetch('/api/v1/phase2/preview-source-normalization',{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('token'))},body:JSON.stringify(config)});if(sourceResponse.ok){const sourcePreview=await sourceResponse.json();setPreviewData(sourcePreview);return;}// Fallback to existing normalized data preview\nconst response=await fetch('/api/v1/phase2/preview-normalized-structure?limit=5',{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('token'))},body:JSON.stringify(config)});if(response.ok){const preview=await response.json();setPreviewData(preview);}else{setError('Failed to preview structure - no source or normalized data available');}}catch(err){setError(err instanceof Error?err.message:'Failed to preview data');}};const rollbackNormalization=async()=>{if(!window.confirm('Are you sure you want to rollback the normalization? This will delete all normalized data.')){return;}try{const response=await fetch('/api/v1/phase2/rollback',{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('token'))},body:JSON.stringify(config)});if(response.ok){setNormalizationResult(null);setPreviewData(null);await getNormalizationStatus();setError(null);}else{var _result$detail2;const result=await response.json();setError(((_result$detail2=result.detail)===null||_result$detail2===void 0?void 0:_result$detail2.message)||result.message||'Rollback failed');}}catch(err){setError(err instanceof Error?err.message:'Rollback failed');}};const handleConfigChange=(field,value)=>{setConfig(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));};const resetConfig=()=>{setConfig({source_collection:\"raw_statutes\",target_collection:\"normalized_statutes\",database_name:\"Statutes\",sorted_collection:\"sorted_statutes\"});};React.useEffect(()=>{getNormalizationStatus();},[]);const tabs=[{id:'overview',label:'Overview',icon:Database},{id:'statute-names',label:'Statute Name Normalizer',icon:FileText},{id:'results',label:'Results Preview',icon:Eye}];const renderTabContent=()=>{var _statusInfo$raw_count,_statusInfo$normalize,_statusInfo$unique_st,_normalizationResult$,_normalizationResult$2,_normalizationResult$3;switch(activeTab){case'overview':return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"w-5 h-5 mr-2\"}),\"Normalization Status\"]}),statusInfo?/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-blue-600\",children:((_statusInfo$raw_count=statusInfo.raw_count)===null||_statusInfo$raw_count===void 0?void 0:_statusInfo$raw_count.toLocaleString())||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-blue-600\",children:\"Raw Documents\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-green-600\",children:((_statusInfo$normalize=statusInfo.normalized_count)===null||_statusInfo$normalize===void 0?void 0:_statusInfo$normalize.toLocaleString())||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-green-600\",children:\"Normalized Statutes\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-purple-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-purple-600\",children:((_statusInfo$unique_st=statusInfo.unique_statutes)===null||_statusInfo$unique_st===void 0?void 0:_statusInfo$unique_st.toLocaleString())||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-purple-600\",children:\"Unique Statutes\"})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500\",children:\"Loading status...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(Settings,{className:\"w-5 h-5 mr-2\"}),\"Database Configuration\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Database Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:config.database_name,onChange:e=>handleConfigChange('database_name',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"Statutes\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Source Collection\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:config.source_collection,onChange:e=>handleConfigChange('source_collection',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"raw_statutes\",disabled:!config.database_name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Target Collection\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:config.target_collection,onChange:e=>handleConfigChange('target_collection',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"normalized_statutes\",disabled:!config.database_name})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:resetConfig,className:\"text-gray-600 hover:text-gray-800 text-sm underline\",children:\"Reset to Defaults\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"Current: \",config.source_collection,\" \\u2192 \",config.target_collection]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(Play,{className:\"w-5 h-5 mr-2\"}),\"Normalization Controls\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:saveMetadata,onChange:e=>setSaveMetadata(e.target.checked),className:\"mr-2\"}),\"Save metadata to file\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:executeNormalization,disabled:isNormalizing,className:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center\",children:isNormalizing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader2,{className:\"w-4 h-4 mr-2 animate-spin\"}),progressStep||'Processing...']}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Play,{className:\"w-4 h-4 mr-2\"}),\"Execute Normalization\"]})})]}),isNormalizing&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-blue-900\",children:\"Processing Status\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"w-4 h-4 text-blue-600 animate-spin mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-blue-700\",children:\"In Progress\"})]})]}),progressStep&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-blue-800 font-medium mb-1\",children:progressStep}),progressDetails&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-blue-600\",children:progressDetails}),processingStats&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs text-blue-600 mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Progress\"}),/*#__PURE__*/_jsxs(\"span\",{children:[processingStats.processed,\" / \",processingStats.total]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-blue-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-600 h-2 rounded-full transition-all duration-300\",style:{width:\"\".concat(processingStats.processed/processingStats.total*100,\"%\")}})})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 border border-red-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-2\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-4 h-4 text-red-600 mr-2\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-red-900\",children:\"Error Details\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-red-800 mb-2\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-red-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Suggestions:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"mt-1 ml-4 list-disc\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Check database connection and permissions\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Verify source collection exists and contains data\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Ensure target collection name is valid\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Try refreshing the page and attempting again\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:previewNormalizedStructure,className:\"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center\",children:[/*#__PURE__*/_jsx(Eye,{className:\"w-4 h-4 mr-2\"}),\"Preview Structure\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:rollbackNormalization,className:\"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center\",children:[/*#__PURE__*/_jsx(RotateCcw,{className:\"w-4 h-4 mr-2\"}),\"Rollback\"]})]})]})]}),normalizationResult&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-5 h-5 mr-2 text-green-600\"}),\"Normalization Results\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-green-800 font-medium\",children:normalizationResult.message}),normalizationResult.metadata&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 text-sm text-green-700\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Processed: \",((_normalizationResult$=normalizationResult.metadata.total_documents_processed)===null||_normalizationResult$===void 0?void 0:_normalizationResult$.toLocaleString())||0,\" documents\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Unique Statutes: \",((_normalizationResult$2=normalizationResult.metadata.unique_statutes)===null||_normalizationResult$2===void 0?void 0:_normalizationResult$2.toLocaleString())||0]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Total Sections: \",((_normalizationResult$3=normalizationResult.metadata.total_sections)===null||_normalizationResult$3===void 0?void 0:_normalizationResult$3.toLocaleString())||0]}),normalizationResult.metadata.metadata_file_path&&/*#__PURE__*/_jsxs(\"div\",{children:[\"Metadata saved to: \",normalizationResult.metadata.metadata_file_path]})]})]})]}),previewData&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(Eye,{className:\"w-5 h-5 mr-2\"}),\"Normalized Structure Preview\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-blue-800 font-medium\",children:previewData.message}),(previewData.total_statutes||previewData.unique_statutes_found)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-sm text-blue-700\",children:[previewData.total_statutes&&\"Total statutes: \".concat(previewData.total_statutes.toLocaleString()),previewData.unique_statutes_found&&\"Unique statutes found: \".concat(previewData.unique_statutes_found.toLocaleString()),previewData.total_raw_documents&&\" (from \".concat(previewData.total_raw_documents.toLocaleString(),\" raw documents)\")]}),previewData.preview_data&&previewData.preview_data.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-blue-800 mb-2\",children:\"Sample Data Structure:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:previewData.preview_data.map((statute,index)=>{var _statute$Sections;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-3 rounded border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-blue-900\",children:statute.normalized_name||statute.statute_name||statute.Statute_Name}),statute.original_name&&statute.original_name!==statute.normalized_name&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 mb-1\",children:[\"Original: \",statute.original_name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-blue-700\",children:[statute.section_count||((_statute$Sections=statute.Sections)===null||_statute$Sections===void 0?void 0:_statute$Sections.length)||0,\" sections\"]}),statute.sections_preview&&statute.sections_preview.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-xs text-gray-600\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:\"Sample sections:\"}),statute.sections_preview.slice(0,3).map((s,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"ml-2\",children:[\"\\u2022 \",s.section_number||s.section_type,\": \",s.definition||s.content_preview||'']},idx))]})]},index);})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"How It Works\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 text-gray-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-100 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium mr-3 mt-0.5\",children:\"1\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Read all documents from the raw_statutes collection\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-100 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium mr-3 mt-0.5\",children:\"2\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Normalize statute names (remove whitespace, title case, clean special characters)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-100 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium mr-3 mt-0.5\",children:\"3\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Group all sections by normalized statute name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-100 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium mr-3 mt-0.5\",children:\"4\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Sort sections: preamble first, then numeric, then text\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-100 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium mr-3 mt-0.5\",children:\"5\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Build new documents with Statute_Name and Sections array\"})]})]})]})]});case'statute-names':return/*#__PURE__*/_jsx(StatuteNameNormalizer,{config:config});case'results':return/*#__PURE__*/_jsx(ResultsPreview,{config:config});default:return null;}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Phase 2: Database Normalization\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1 text-sm\",children:\"Normalize and structure your legal documents with intelligent grouping and sorting\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200 mb-4\",children:/*#__PURE__*/_jsx(\"nav\",{className:\"-mb-px flex space-x-8\",children:tabs.map(tab=>{const Icon=tab.icon;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab(tab.id),className:\"py-2 px-1 border-b-2 font-medium text-sm flex items-center \".concat(activeTab===tab.id?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:[/*#__PURE__*/_jsx(Icon,{className:\"w-4 h-4 mr-2\"}),tab.label]},tab.id);})})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 bg-red-50 border border-red-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-5 h-5 text-red-400 mr-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-800\",children:error})]})}),renderTabContent()]});};export default Phase2;","map":{"version":3,"names":["React","useState","Database","Play","Eye","RotateCcw","FileText","BarChart3","CheckCircle","AlertCircle","Loader2","Settings","useAuth","StatuteNameNormalizer","ResultsPreview","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Phase2","user","activeTab","setActiveTab","isNormalizing","setIsNormalizing","saveMetadata","setSaveMetadata","normalizationResult","setNormalizationResult","previewData","setPreviewData","statusInfo","setStatusInfo","error","setError","progressStep","setProgressStep","progressDetails","setProgressDetails","processingStats","setProcessingStats","config","setConfig","source_collection","target_collection","database_name","sorted_collection","executeNormalization","concat","sourceDb","targetDb","serviceRequest","source_db","target_db","options","save_metadata","batch_size","legacy_compatibility","same_database_mode","actual_database","response","fetch","method","headers","localStorage","getItem","body","JSON","stringify","result","json","ok","_result$data","transformedResult","success","message","metadata","data","timestamp","service_based","migration_note","getNormalizationStatus","_result$detail","Error","detail","err","setTimeout","status","console","previewNormalizedStructure","sourceResponse","sourcePreview","preview","rollbackNormalization","window","confirm","_result$detail2","handleConfigChange","field","value","prev","_objectSpread","resetConfig","useEffect","tabs","id","label","icon","renderTabContent","_statusInfo$raw_count","_statusInfo$normalize","_statusInfo$unique_st","_normalizationResult$","_normalizationResult$2","_normalizationResult$3","className","children","raw_count","toLocaleString","normalized_count","unique_statutes","type","onChange","e","target","placeholder","disabled","onClick","checked","processed","total","style","width","total_documents_processed","total_sections","metadata_file_path","total_statutes","unique_statutes_found","total_raw_documents","preview_data","length","map","statute","index","_statute$Sections","normalized_name","statute_name","Statute_Name","original_name","section_count","Sections","sections_preview","slice","s","idx","section_number","section_type","definition","content_preview","tab","Icon"],"sources":["D:/DigiFloat/LawChronicle/frontend/src/pages/Phase2.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Database, Play, Eye, RotateCcw, FileText, BarChart3, CheckCircle, AlertCircle, Loader2, Settings } from 'lucide-react';\nimport { useAuth } from '../contexts/AuthContext';\nimport StatuteNameNormalizer from '../components/phase2/StatuteNameNormalizer';\nimport ResultsPreview from '../components/phase2/ResultsPreview';\n\ninterface NormalizationResult {\n  success: boolean;\n  message: string;\n  metadata?: any;\n  summary?: any;\n  completed_at?: string;\n}\n\ninterface PreviewData {\n  success: boolean;\n  message: string;\n  total_statutes?: number;\n  unique_statutes_found?: number;\n  total_raw_documents?: number;\n  preview_data?: any[];\n  data_structure?: any;\n}\n\ninterface NormalizationConfig {\n  source_collection: string;\n  target_collection: string;\n  database_name?: string;\n  sorted_collection: string;\n}\n\ntype TabType = 'overview' | 'statute-names' | 'results';\n\nconst Phase2: React.FC = () => {\n  const { user } = useAuth();\n  const [activeTab, setActiveTab] = useState<TabType>('overview');\n  const [isNormalizing, setIsNormalizing] = useState(false);\n  const [saveMetadata, setSaveMetadata] = useState(false);\n  const [normalizationResult, setNormalizationResult] = useState<NormalizationResult | null>(null);\n  const [previewData, setPreviewData] = useState<PreviewData | null>(null);\n  const [statusInfo, setStatusInfo] = useState<any>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [progressStep, setProgressStep] = useState<string>('');\n  const [progressDetails, setProgressDetails] = useState<string>('');\n  const [processingStats, setProcessingStats] = useState<{processed: number, total: number} | null>(null);\n  \n  // Configuration state\n  const [config, setConfig] = useState<NormalizationConfig>({\n    source_collection: \"raw_statutes\",\n    target_collection: \"normalized_statutes\",\n    database_name: \"Statutes\",\n    sorted_collection: \"sorted_statutes\"\n  });\n\n  const executeNormalization = async () => {\n    setIsNormalizing(true);\n    setError(null);\n    setNormalizationResult(null);\n    setProgressStep('Initializing normalization process...');\n    setProgressDetails('Preparing service request and validating configuration');\n    setProcessingStats(null);\n\n    try {\n      // Step 1: Prepare service request\n      setProgressStep('Preparing normalization request');\n      setProgressDetails(`Source: ${config.source_collection} → Target: ${config.target_collection}`);\n      \n      const sourceDb = config.database_name || \"Statutes\";\n      const targetDb = config.database_name || \"Statutes\";\n      \n      const serviceRequest = {\n        source_db: sourceDb,\n        target_db: targetDb,\n        options: {\n          source_collection: config.source_collection,\n          target_collection: config.target_collection,\n          sorted_collection: config.sorted_collection,\n          save_metadata: saveMetadata,\n          batch_size: 1000,\n          legacy_compatibility: true,  // Enable legacy mode\n          same_database_mode: true,    // Allow same database\n          actual_database: sourceDb    // The actual database name\n        }\n      };\n\n      // Step 2: Send request to service\n      setProgressStep('Sending request to normalization service');\n      setProgressDetails('Connecting to backend service endpoint...');\n\n            const response = await fetch('/api/v1/phase2/start-normalization', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify(serviceRequest)\n      });\n\n      // Step 3: Process response\n      setProgressStep('Processing service response');\n      setProgressDetails('Analyzing normalization results...');\n\n      const result = await response.json();\n      \n      if (response.ok) {\n        // Step 4: Success handling\n        setProgressStep('Normalization completed successfully!');\n        setProgressDetails(`Processed statutes and created normalized collection`);\n        \n        // Transform service response to match expected format\n        const transformedResult = {\n          success: result.success,\n          message: result.message,\n          metadata: result.data?.metadata || result.data || {},\n          timestamp: result.timestamp,\n          service_based: true,\n          migration_note: \"Using modern service-based normalization\"\n        };\n        setNormalizationResult(transformedResult);\n        \n        // Step 5: Refresh status\n        setProgressStep('Refreshing status dashboard');\n        setProgressDetails('Updating progress indicators...');\n        await getNormalizationStatus();\n        \n        setProgressStep('Ready for next phase');\n        setProgressDetails('Normalization completed successfully - ready to proceed');\n      } else {\n        throw new Error(result.detail?.message || result.message || 'Normalization failed');\n      }\n    } catch (err) {\n      setProgressStep('Error occurred during normalization');\n      setProgressDetails(err instanceof Error ? err.message : 'An unexpected error occurred');\n      setError(err instanceof Error ? err.message : 'An unexpected error occurred');\n    } finally {\n      setIsNormalizing(false);\n      // Clear progress after a delay\n      setTimeout(() => {\n        if (!isNormalizing) {\n          setProgressStep('');\n          setProgressDetails('');\n          setProcessingStats(null);\n        }\n      }, 3000);\n    }\n  };\n\n  const getNormalizationStatus = async () => {\n    try {\n      const response = await fetch('/api/v1/phase2/normalization-status', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify(config)\n      });\n      \n      if (response.ok) {\n        const status = await response.json();\n        setStatusInfo(status);\n      }\n    } catch (err) {\n      console.error('Failed to get status:', err);\n    }\n  };\n\n  const previewNormalizedStructure = async () => {\n    try {\n      // First try the source-based preview (shows what will be normalized)\n      const sourceResponse = await fetch('/api/v1/phase2/preview-source-normalization', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify(config)\n      });\n      \n      if (sourceResponse.ok) {\n        const sourcePreview = await sourceResponse.json();\n        setPreviewData(sourcePreview);\n        return;\n      }\n      \n      // Fallback to existing normalized data preview\n      const response = await fetch('/api/v1/phase2/preview-normalized-structure?limit=5', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify(config)\n      });\n      \n      if (response.ok) {\n        const preview = await response.json();\n        setPreviewData(preview);\n      } else {\n        setError('Failed to preview structure - no source or normalized data available');\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to preview data');\n    }\n  };\n\n  const rollbackNormalization = async () => {\n    if (!window.confirm('Are you sure you want to rollback the normalization? This will delete all normalized data.')) {\n      return;\n    }\n\n    try {\n      const response = await fetch('/api/v1/phase2/rollback', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify(config)\n      });\n\n      if (response.ok) {\n        setNormalizationResult(null);\n        setPreviewData(null);\n        await getNormalizationStatus();\n        setError(null);\n      } else {\n        const result = await response.json();\n        setError(result.detail?.message || result.message || 'Rollback failed');\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Rollback failed');\n    }\n  };\n\n  const handleConfigChange = (field: keyof NormalizationConfig, value: string) => {\n    setConfig(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n\n  const resetConfig = () => {\n    setConfig({\n      source_collection: \"raw_statutes\",\n      target_collection: \"normalized_statutes\",\n      database_name: \"Statutes\",\n      sorted_collection: \"sorted_statutes\"\n    });\n  };\n\n  React.useEffect(() => {\n    getNormalizationStatus();\n  }, []);\n\n  const tabs = [\n    { id: 'overview', label: 'Overview', icon: Database },\n    { id: 'statute-names', label: 'Statute Name Normalizer', icon: FileText },\n    { id: 'results', label: 'Results Preview', icon: Eye }\n  ];\n\n  const renderTabContent = () => {\n    switch (activeTab) {\n      case 'overview':\n        return (\n          <div className=\"space-y-6\">\n            {/* Status Overview */}\n            <div className=\"bg-white rounded-lg shadow p-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n                <BarChart3 className=\"w-5 h-5 mr-2\" />\n                Normalization Status\n              </h3>\n              {statusInfo ? (\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <div className=\"bg-blue-50 p-4 rounded-lg\">\n                    <div className=\"text-2xl font-bold text-blue-600\">{statusInfo.raw_count?.toLocaleString() || 0}</div>\n                    <div className=\"text-sm text-blue-600\">Raw Documents</div>\n                  </div>\n                  <div className=\"bg-green-50 p-4 rounded-lg\">\n                    <div className=\"text-2xl font-bold text-green-600\">{statusInfo.normalized_count?.toLocaleString() || 0}</div>\n                    <div className=\"text-sm text-green-600\">Normalized Statutes</div>\n                  </div>\n                  <div className=\"bg-purple-50 p-4 rounded-lg\">\n                    <div className=\"text-2xl font-bold text-purple-600\">{statusInfo.unique_statutes?.toLocaleString() || 0}</div>\n                    <div className=\"text-sm text-purple-600\">Unique Statutes</div>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"text-gray-500\">Loading status...</div>\n              )}\n            </div>\n\n            {/* Configuration Panel */}\n            <div className=\"bg-white rounded-lg shadow p-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n                <Settings className=\"w-5 h-5 mr-2\" />\n                Database Configuration\n              </h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Database Name\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={config.database_name}\n                    onChange={(e) => handleConfigChange('database_name', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"Statutes\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Source Collection\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={config.source_collection}\n                    onChange={(e) => handleConfigChange('source_collection', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"raw_statutes\"\n                    disabled={!config.database_name}\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Target Collection\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={config.target_collection}\n                    onChange={(e) => handleConfigChange('target_collection', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"normalized_statutes\"\n                    disabled={!config.database_name}\n                  />\n                </div>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <button\n                  onClick={resetConfig}\n                  className=\"text-gray-600 hover:text-gray-800 text-sm underline\"\n                >\n                  Reset to Defaults\n                </button>\n                <div className=\"text-sm text-gray-500\">\n                  Current: {config.source_collection} → {config.target_collection}\n                </div>\n              </div>\n            </div>\n\n            {/* Normalization Controls */}\n            <div className=\"bg-white rounded-lg shadow p-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n                <Play className=\"w-5 h-5 mr-2\" />\n                Normalization Controls\n              </h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center space-x-4\">\n                  <label className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      checked={saveMetadata}\n                      onChange={(e) => setSaveMetadata(e.target.checked)}\n                      className=\"mr-2\"\n                    />\n                    Save metadata to file\n                  </label>\n                  <button\n                    onClick={executeNormalization}\n                    disabled={isNormalizing}\n                    className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center\"\n                  >\n                    {isNormalizing ? (\n                      <>\n                        <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                        {progressStep || 'Processing...'}\n                      </>\n                    ) : (\n                      <>\n                        <Play className=\"w-4 h-4 mr-2\" />\n                        Execute Normalization\n                      </>\n                    )}\n                  </button>\n                </div>\n                \n                {/* Enhanced Progress Display */}\n                {isNormalizing && (\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <h4 className=\"text-sm font-medium text-blue-900\">Processing Status</h4>\n                      <div className=\"flex items-center\">\n                        <Loader2 className=\"w-4 h-4 text-blue-600 animate-spin mr-2\" />\n                        <span className=\"text-sm text-blue-700\">In Progress</span>\n                      </div>\n                    </div>\n                    \n                    {progressStep && (\n                      <div className=\"text-sm text-blue-800 font-medium mb-1\">\n                        {progressStep}\n                      </div>\n                    )}\n                    \n                    {progressDetails && (\n                      <div className=\"text-xs text-blue-600\">\n                        {progressDetails}\n                      </div>\n                    )}\n                    \n                    {processingStats && (\n                      <div className=\"mt-3\">\n                        <div className=\"flex justify-between text-xs text-blue-600 mb-1\">\n                          <span>Progress</span>\n                          <span>{processingStats.processed} / {processingStats.total}</span>\n                        </div>\n                        <div className=\"w-full bg-blue-200 rounded-full h-2\">\n                          <div \n                            className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\" \n                            style={{ width: `${(processingStats.processed / processingStats.total) * 100}%` }}\n                          ></div>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                )}\n\n                {/* Enhanced Error Display */}\n                {error && (\n                  <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n                    <div className=\"flex items-center mb-2\">\n                      <AlertCircle className=\"w-4 h-4 text-red-600 mr-2\" />\n                      <h4 className=\"text-sm font-medium text-red-900\">Error Details</h4>\n                    </div>\n                    <div className=\"text-sm text-red-800 mb-2\">{error}</div>\n                    <div className=\"text-xs text-red-600\">\n                      <strong>Suggestions:</strong>\n                      <ul className=\"mt-1 ml-4 list-disc\">\n                        <li>Check database connection and permissions</li>\n                        <li>Verify source collection exists and contains data</li>\n                        <li>Ensure target collection name is valid</li>\n                        <li>Try refreshing the page and attempting again</li>\n                      </ul>\n                    </div>\n                  </div>\n                )}\n                <div className=\"flex space-x-2\">\n                  <button\n                    onClick={previewNormalizedStructure}\n                    className=\"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center\"\n                  >\n                    <Eye className=\"w-4 h-4 mr-2\" />\n                    Preview Structure\n                  </button>\n                  <button\n                    onClick={rollbackNormalization}\n                    className=\"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center\"\n                  >\n                    <RotateCcw className=\"w-4 h-4 mr-2\" />\n                    Rollback\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            {/* Results Display */}\n            {normalizationResult && (\n              <div className=\"bg-white rounded-lg shadow p-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n                  <CheckCircle className=\"w-5 h-5 mr-2 text-green-600\" />\n                  Normalization Results\n                </h3>\n                <div className=\"bg-green-50 p-4 rounded-lg\">\n                  <div className=\"text-green-800 font-medium\">{normalizationResult.message}</div>\n                  {normalizationResult.metadata && (\n                    <div className=\"mt-3 text-sm text-green-700\">\n                      <div>Processed: {normalizationResult.metadata.total_documents_processed?.toLocaleString() || 0} documents</div>\n                      <div>Unique Statutes: {normalizationResult.metadata.unique_statutes?.toLocaleString() || 0}</div>\n                      <div>Total Sections: {normalizationResult.metadata.total_sections?.toLocaleString() || 0}</div>\n                      {normalizationResult.metadata.metadata_file_path && (\n                        <div>Metadata saved to: {normalizationResult.metadata.metadata_file_path}</div>\n                      )}\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {/* Preview Data */}\n            {previewData && (\n              <div className=\"bg-white rounded-lg shadow p-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n                  <Eye className=\"w-5 h-5 mr-2\" />\n                  Normalized Structure Preview\n                </h3>\n                <div className=\"bg-blue-50 p-4 rounded-lg\">\n                  <div className=\"text-blue-800 font-medium\">{previewData.message}</div>\n                  {(previewData.total_statutes || previewData.unique_statutes_found) && (\n                    <div className=\"mt-2 text-sm text-blue-700\">\n                      {previewData.total_statutes && `Total statutes: ${previewData.total_statutes.toLocaleString()}`}\n                      {previewData.unique_statutes_found && `Unique statutes found: ${previewData.unique_statutes_found.toLocaleString()}`}\n                      {previewData.total_raw_documents && ` (from ${previewData.total_raw_documents.toLocaleString()} raw documents)`}\n                    </div>\n                  )}\n                  {previewData.preview_data && previewData.preview_data.length > 0 && (\n                    <div className=\"mt-3\">\n                      <div className=\"text-sm font-medium text-blue-800 mb-2\">Sample Data Structure:</div>\n                      <div className=\"space-y-2\">\n                        {previewData.preview_data.map((statute: any, index: number) => (\n                          <div key={index} className=\"bg-white p-3 rounded border\">\n                            <div className=\"font-medium text-blue-900\">\n                              {statute.normalized_name || statute.statute_name || statute.Statute_Name}\n                            </div>\n                            {statute.original_name && statute.original_name !== statute.normalized_name && (\n                              <div className=\"text-xs text-gray-500 mb-1\">\n                                Original: {statute.original_name}\n                              </div>\n                            )}\n                            <div className=\"text-sm text-blue-700\">\n                              {statute.section_count || statute.Sections?.length || 0} sections\n                            </div>\n                            {statute.sections_preview && statute.sections_preview.length > 0 && (\n                              <div className=\"mt-2 text-xs text-gray-600\">\n                                <div className=\"font-medium\">Sample sections:</div>\n                                {statute.sections_preview.slice(0, 3).map((s: any, idx: number) => (\n                                  <div key={idx} className=\"ml-2\">\n                                    • {s.section_number || s.section_type}: {s.definition || s.content_preview || ''}\n                                  </div>\n                                ))}\n                              </div>\n                            )}\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {/* How It Works */}\n            <div className=\"bg-white rounded-lg shadow p-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">How It Works</h3>\n              <div className=\"space-y-3 text-gray-700\">\n                <div className=\"flex items-start\">\n                  <div className=\"bg-blue-100 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium mr-3 mt-0.5\">1</div>\n                  <div>Read all documents from the raw_statutes collection</div>\n                </div>\n                <div className=\"flex items-start\">\n                  <div className=\"bg-blue-100 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium mr-3 mt-0.5\">2</div>\n                  <div>Normalize statute names (remove whitespace, title case, clean special characters)</div>\n                </div>\n                <div className=\"flex items-start\">\n                  <div className=\"bg-blue-100 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium mr-3 mt-0.5\">3</div>\n                  <div>Group all sections by normalized statute name</div>\n                </div>\n                <div className=\"flex items-start\">\n                  <div className=\"bg-blue-100 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium mr-3 mt-0.5\">4</div>\n                  <div>Sort sections: preamble first, then numeric, then text</div>\n                </div>\n                <div className=\"flex items-start\">\n                  <div className=\"bg-blue-100 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium mr-3 mt-0.5\">5</div>\n                  <div>Build new documents with Statute_Name and Sections array</div>\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n\n      case 'statute-names':\n        return <StatuteNameNormalizer config={config} />;\n\n      case 'results':\n        return <ResultsPreview config={config} />;\n\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"p-4\">\n      <div className=\"mb-4\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">Phase 2: Database Normalization</h1>\n        <p className=\"text-gray-600 mt-1 text-sm\">\n          Normalize and structure your legal documents with intelligent grouping and sorting\n        </p>\n      </div>\n\n      {/* Tab Navigation */}\n      <div className=\"border-b border-gray-200 mb-4\">\n        <nav className=\"-mb-px flex space-x-8\">\n          {tabs.map((tab) => {\n            const Icon = tab.icon;\n            return (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id as TabType)}\n                className={`py-2 px-1 border-b-2 font-medium text-sm flex items-center ${\n                  activeTab === tab.id\n                    ? 'border-blue-500 text-blue-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                }`}\n              >\n                <Icon className=\"w-4 h-4 mr-2\" />\n                {tab.label}\n              </button>\n            );\n          })}\n        </nav>\n      </div>\n\n      {/* Error Display */}\n      {error && (\n        <div className=\"mb-4 bg-red-50 border border-red-200 rounded-lg p-4\">\n          <div className=\"flex items-center\">\n            <AlertCircle className=\"w-5 h-5 text-red-400 mr-2\" />\n            <div className=\"text-red-800\">{error}</div>\n          </div>\n        </div>\n      )}\n\n      {/* Tab Content */}\n      {renderTabContent()}\n    </div>\n  );\n};\n\nexport default Phase2;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}