{"ast":null,"code":"import _objectSpread from\"D:/DigiFloat/LawChronicle/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Play,RotateCcw,Eye,Download,AlertTriangle,CheckCircle,Clock}from'lucide-react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DatabaseNormalization=_ref=>{var _databaseInfo$collect,_databaseInfo$collect2,_logicTestResults$nam,_logicTestResults$sec;let{config:propConfig,onStatusUpdate,onConfigUpdate}=_ref;const[config,setConfig]=useState({mongo_uri:(propConfig===null||propConfig===void 0?void 0:propConfig.mongo_uri)||'mongodb://localhost:27017',source_db:(propConfig===null||propConfig===void 0?void 0:propConfig.source_db)||'Statutes',source_collection:(propConfig===null||propConfig===void 0?void 0:propConfig.source_collection)||'raw_statutes',target_db:(propConfig===null||propConfig===void 0?void 0:propConfig.target_db)||'Statutes',target_collection:(propConfig===null||propConfig===void 0?void 0:propConfig.target_collection)||'normalized_statutes'});const[isRunning,setIsRunning]=useState(false);const[currentStep,setCurrentStep]=useState('');const[progress,setProgress]=useState(0);const[results,setResults]=useState([]);const[error,setError]=useState('');const[showConfig,setShowConfig]=useState(false);const[testResults,setTestResults]=useState(null);const[connectionTest,setConnectionTest]=useState(null);const[debugScript,setDebugScript]=useState(null);const[showRollbackConfirm,setShowRollbackConfirm]=useState(false);const[databaseInfo,setDatabaseInfo]=useState({databases:[],collections:{}});const[isLoadingDatabases,setIsLoadingDatabases]=useState(false);const[showNewCollectionModal,setShowNewCollectionModal]=useState(false);const[newCollectionName,setNewCollectionName]=useState('');const[newCollectionType,setNewCollectionType]=useState('source');const[showNewDatabaseModal,setShowNewDatabaseModal]=useState(false);const[newDatabaseName,setNewDatabaseName]=useState('');const[logicTestResults,setLogicTestResults]=useState(null);const[configSaved,setConfigSaved]=useState(false);const handleConfigChange=(field,value)=>{const newConfig=_objectSpread(_objectSpread({},config),{},{[field]:value});setConfig(newConfig);// Update parent configuration\nif(onConfigUpdate){onConfigUpdate({[field]:value});}// Show saved indicator\nsetConfigSaved(true);setTimeout(()=>setConfigSaved(false),2000);// Also update the parent config if onStatusUpdate is available\nif(onStatusUpdate){onStatusUpdate();}};const fetchDatabases=async()=>{try{setIsLoadingDatabases(true);const response=await axios.get('/api/v1/phase2/databases');if(response.data.success){const databases=response.data.databases;setDatabaseInfo(prev=>_objectSpread(_objectSpread({},prev),{},{databases}));// Fetch collections for each database\nconst collections={};for(const dbName of databases){try{const collResponse=await axios.get(\"/api/v1/phase2/collections/\".concat(dbName));if(collResponse.data.success){collections[dbName]=collResponse.data.collections;}}catch(err){console.warn(\"Failed to fetch collections for \".concat(dbName,\":\"),err);collections[dbName]=[];}}setDatabaseInfo(prev=>_objectSpread(_objectSpread({},prev),{},{collections}));}}catch(err){console.error('Failed to fetch databases:',err);}finally{setIsLoadingDatabases(false);}};const refreshCollections=async databaseName=>{try{const response=await axios.get(\"/api/v1/phase2/collections/\".concat(databaseName));if(response.data.success){setDatabaseInfo(prev=>_objectSpread(_objectSpread({},prev),{},{collections:_objectSpread(_objectSpread({},prev.collections),{},{[databaseName]:response.data.collections})}));}}catch(err){console.error(\"Failed to refresh collections for \".concat(databaseName,\":\"),err);}};const handleDatabaseChange=async(field,value)=>{setConfig(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));// Reset collection if database changes\nif(field==='source_db'){setConfig(prev=>_objectSpread(_objectSpread({},prev),{},{source_collection:''}));}else{setConfig(prev=>_objectSpread(_objectSpread({},prev),{},{target_collection:''}));}};const handleNewCollection=async()=>{if(newCollectionName.trim()){try{// Create the collection in MongoDB\nconst response=await axios.post('/api/v1/phase2/create-collection',{database:newCollectionType==='source'?config.source_db:config.target_db,collection_name:newCollectionName.trim()});if(response.data.success){// Update local config\nif(newCollectionType==='source'){setConfig(prev=>_objectSpread(_objectSpread({},prev),{},{source_collection:newCollectionName.trim()}));}else{setConfig(prev=>_objectSpread(_objectSpread({},prev),{},{target_collection:newCollectionName.trim()}));}// Refresh collections for the relevant database\nif(newCollectionType==='source'){await refreshCollections(config.source_db);}else{await refreshCollections(config.target_db);}setNewCollectionName('');setShowNewCollectionModal(false);}else{throw new Error(response.data.message||'Failed to create collection');}}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||err.message||'Failed to create collection');}}};const handleNewDatabase=async()=>{if(newDatabaseName.trim()){try{// Create the database in MongoDB\nconst response=await axios.post('/api/v1/phase2/create-database',{database_name:newDatabaseName.trim()});if(response.data.success){// Refresh databases list\nawait fetchDatabases();setNewDatabaseName('');setShowNewDatabaseModal(false);}else{throw new Error(response.data.message||'Failed to create database');}}catch(err){var _err$response2,_err$response2$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.detail)||err.message||'Failed to create database');}}};useEffect(()=>{fetchDatabases();},[]);// Update local config when propConfig changes\nuseEffect(()=>{if(propConfig){setConfig({mongo_uri:propConfig.mongo_uri||'mongodb://localhost:27017',source_db:propConfig.source_db||'Statutes',source_collection:propConfig.source_collection||'raw_statutes',target_db:propConfig.target_db||'Statutes',target_collection:propConfig.target_collection||'normalized_statutes'});}},[propConfig]);const testConnection=async()=>{try{setError('');setConnectionTest(null);setCurrentStep('Testing MongoDB connection...');const response=await axios.post('/api/v1/phase2/test-connection');if(response.data.success){setConnectionTest(response.data);setCurrentStep('Connection test completed successfully!');}else{throw new Error(response.data.message||'Connection test failed');}}catch(err){var _err$response3,_err$response3$data;setError(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.detail)||err.message||'Connection test failed');setCurrentStep('');}};const generateDebugScript=async()=>{try{setError('');setDebugScript(null);setCurrentStep('Generating debug script...');const response=await axios.post('/api/v1/phase2/debug-script',config);if(response.data.success){setDebugScript(response.data);setCurrentStep('Debug script generated successfully!');}else{throw new Error(response.data.message||'Debug script generation failed');}}catch(err){var _err$response4,_err$response4$data;setError(((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.detail)||err.message||'Debug script generation failed');setCurrentStep('');}};const testNormalization=async()=>{try{setError('');setTestResults(null);setCurrentStep('Testing normalization with sample data...');const response=await axios.post('/api/v1/phase2/test-normalization',config);if(response.data.success){setTestResults(response.data);setCurrentStep('Test completed successfully!');}else{throw new Error(response.data.message||'Test failed');}}catch(err){var _err$response5,_err$response5$data;setError(((_err$response5=err.response)===null||_err$response5===void 0?void 0:(_err$response5$data=_err$response5.data)===null||_err$response5$data===void 0?void 0:_err$response5$data.detail)||err.message||'Test failed');setCurrentStep('');}};const testNormalizationLogic=async()=>{try{setLogicTestResults(null);const response=await axios.post('/api/v1/phase2/test-normalization-logic');if(response.data.success){setLogicTestResults(response.data);}}catch(err){console.error('Failed to test normalization logic:',err);setLogicTestResults({error:err.message});}};const startNormalization=async()=>{setIsRunning(true);setError('');setResults([]);setProgress(0);setCurrentStep('Initializing...');try{// Step 1: Generate scripts\nsetCurrentStep('Generating normalization scripts...');setProgress(10);const scriptsResponse=await axios.post('/api/v1/phase2/generate-scripts',config);if(!scriptsResponse.data.success){throw new Error('Failed to generate scripts');}// Step 2: Execute normalization\nsetCurrentStep('Executing normalization process...');setProgress(30);const normalizationResponse=await axios.post('/api/v1/phase2/execute-normalization',config);if(normalizationResponse.data.success){setResults(normalizationResponse.data.results);setProgress(100);setCurrentStep('Normalization completed successfully!');// Update status in parent component\nif(onStatusUpdate){onStatusUpdate();}}else{throw new Error(normalizationResponse.data.message||'Normalization failed');}}catch(err){var _err$response6,_err$response6$data;setError(((_err$response6=err.response)===null||_err$response6===void 0?void 0:(_err$response6$data=_err$response6.data)===null||_err$response6$data===void 0?void 0:_err$response6$data.detail)||err.message||'An error occurred during normalization');setCurrentStep('Normalization failed');}finally{setIsRunning(false);}};const handleRollbackClick=()=>{setShowRollbackConfirm(true);};const rollbackNormalization=async()=>{try{setError('');setCurrentStep('Rolling back changes...');const response=await axios.post('/api/v1/phase2/rollback');if(response.data.success){setResults([]);setProgress(0);setCurrentStep('Rollback completed successfully');// Update status in parent component\nif(onStatusUpdate){onStatusUpdate();}}else{throw new Error('Rollback failed');}}catch(err){var _err$response7,_err$response7$data;setError(((_err$response7=err.response)===null||_err$response7===void 0?void 0:(_err$response7$data=_err$response7.data)===null||_err$response7$data===void 0?void 0:_err$response7$data.detail)||err.message||'Rollback failed');}finally{setCurrentStep('');setShowRollbackConfirm(false);}};const getStepStatus=stepName=>{const result=results.find(r=>r.script_name===stepName);if(!result)return'pending';return result.success?'success':'failed';};const getStepIcon=stepName=>{const status=getStepStatus(stepName);switch(status){case'success':return/*#__PURE__*/_jsx(CheckCircle,{className:\"h-5 w-5 text-green-500\"});case'failed':return/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-5 w-5 text-red-500\"});case'pending':return/*#__PURE__*/_jsx(Clock,{className:\"h-5 w-5 text-gray-400\"});default:return/*#__PURE__*/_jsx(Clock,{className:\"h-5 w-5 text-gray-400\"});}};const getStepColor=stepName=>{const status=getStepStatus(stepName);switch(status){case'success':return'bg-green-50 border-green-200';case'failed':return'bg-red-50 border-red-200';case'pending':return'bg-gray-50 border-gray-200';default:return'bg-gray-50 border-gray-200';}};// Export configuration to JSON file\nconst exportConfig=()=>{const configData=_objectSpread(_objectSpread({},config),{},{exported_at:new Date().toISOString(),version:'1.0'});const blob=new Blob([JSON.stringify(configData,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"lawchronicle_config_\".concat(new Date().toISOString().split('T')[0],\".json\");document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);};// Import configuration from JSON file\nconst importConfig=event=>{var _event$target$files;const file=(_event$target$files=event.target.files)===null||_event$target$files===void 0?void 0:_event$target$files[0];if(!file)return;const reader=new FileReader();reader.onload=e=>{try{var _e$target;const importedConfig=JSON.parse((_e$target=e.target)===null||_e$target===void 0?void 0:_e$target.result);// Validate and merge configuration\nconst validConfig={mongo_uri:importedConfig.mongo_uri||config.mongo_uri,source_db:importedConfig.source_db||config.source_db,source_collection:importedConfig.source_collection||config.source_collection,target_db:importedConfig.target_db||config.target_db,target_collection:importedConfig.target_collection||config.target_collection};setConfig(validConfig);// Update parent configuration\nif(onConfigUpdate){onConfigUpdate(validConfig);}setConfigSaved(true);setTimeout(()=>setConfigSaved(false),2000);}catch(error){alert('Invalid configuration file. Please check the format.');}};reader.readAsText(file);// Reset file input\nevent.target.value='';};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Normalization Configuration\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[isLoadingDatabases&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-500\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600 mr-2\"}),\"Loading databases...\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:exportConfig,className:\"px-3 py-1 text-sm text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-500\",title:\"Export configuration\",children:\"\\uD83D\\uDCE4 Export\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"px-3 py-1 text-sm text-green-600 bg-green-50 border border-green-200 rounded-md hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-green-500 cursor-pointer\",children:[\"\\uD83D\\uDCE5 Import\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".json\",onChange:importConfig,className:\"hidden\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowConfig(!showConfig),className:\"text-sm text-primary-600 hover:text-primary-800\",children:[showConfig?'Hide':'Show',\" Configuration\"]})]})]}),showConfig&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"MongoDB URI\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:config.mongo_uri,onChange:e=>handleConfigChange('mongo_uri',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",placeholder:\"mongodb://localhost:27017\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Source Database\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsxs(\"select\",{value:config.source_db,onChange:e=>handleDatabaseChange('source_db',e.target.value),className:\"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",disabled:isLoadingDatabases,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Database\"}),databaseInfo.databases.map(db=>/*#__PURE__*/_jsx(\"option\",{value:db,children:db},db))]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>fetchDatabases(),disabled:isLoadingDatabases,className:\"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500\",title:\"Refresh databases\",children:\"\\uD83D\\uDD04\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowNewDatabaseModal(true),disabled:isLoadingDatabases,className:\"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500\",title:\"Create new database\",children:\"\\u2795\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Source Collection\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsxs(\"select\",{value:config.source_collection,onChange:e=>handleConfigChange('source_collection',e.target.value),className:\"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",disabled:!config.source_db||isLoadingDatabases,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Collection\"}),config.source_db&&((_databaseInfo$collect=databaseInfo.collections[config.source_db])===null||_databaseInfo$collect===void 0?void 0:_databaseInfo$collect.map(coll=>/*#__PURE__*/_jsx(\"option\",{value:coll,children:coll},coll)))]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(config.source_db){refreshCollections(config.source_db);}},disabled:!config.source_db||isLoadingDatabases,className:\"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500\",title:\"Refresh collections\",children:\"\\uD83D\\uDD04\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setNewCollectionType('source');setShowNewCollectionModal(true);},className:\"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500\",title:\"Create new collection\",children:\"\\u2795\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Input collection containing raw statute data\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Target Database\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsxs(\"select\",{value:config.target_db,onChange:e=>handleDatabaseChange('target_db',e.target.value),className:\"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",disabled:isLoadingDatabases,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Database\"}),databaseInfo.databases.map(db=>/*#__PURE__*/_jsx(\"option\",{value:db,children:db},db))]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>fetchDatabases(),disabled:isLoadingDatabases,className:\"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500\",title:\"Refresh databases\",children:\"\\uD83D\\uDD04\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowNewDatabaseModal(true),disabled:isLoadingDatabases,className:\"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500\",title:\"Create new database\",children:\"\\u2795\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Target Collection\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsxs(\"select\",{value:config.target_collection,onChange:e=>handleConfigChange('target_collection',e.target.value),className:\"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",disabled:!config.target_db||isLoadingDatabases,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Collection\"}),config.target_db&&((_databaseInfo$collect2=databaseInfo.collections[config.target_db])===null||_databaseInfo$collect2===void 0?void 0:_databaseInfo$collect2.map(coll=>/*#__PURE__*/_jsx(\"option\",{value:coll,children:coll},coll)))]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(config.target_db){refreshCollections(config.target_db);}},disabled:!config.target_db||isLoadingDatabases,className:\"px-2 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500\",title:\"Refresh collections\",children:\"\\uD83D\\uDD04\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setNewCollectionType('target');setShowNewCollectionModal(true);},className:\"px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",title:\"Create new collection\",disabled:!config.target_db,children:\"\\u2795\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Output collection for normalized data\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:testConnection,disabled:isRunning,className:\"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"h-4 w-4 mr-2\"}),\"Test Connection\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:generateDebugScript,disabled:isRunning,className:\"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(Download,{className:\"h-4 w-4 mr-2\"}),\"Debug Script\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:testNormalization,disabled:isRunning,className:\"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(Eye,{className:\"h-4 w-4 mr-2\"}),\"Test Sample\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:testNormalizationLogic,disabled:isRunning,className:\"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(Eye,{className:\"h-4 w-4 mr-2\"}),\"Test Logic\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:startNormalization,disabled:isRunning,className:\"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(Play,{className:\"h-5 w-5 mr-2\"}),isRunning?'Running...':'Start Normalization']}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleRollbackClick,disabled:isRunning||results.length===0,className:\"inline-flex items-center px-6 py-3 border border-gray-300 text-base font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(RotateCcw,{className:\"h-5 w-5 mr-2\"}),\"Rollback Changes\"]})]})]}),isRunning&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Normalization Progress\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:currentStep}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-gray-700\",children:[progress,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-primary-600 h-2 rounded-full transition-all duration-300\",style:{width:\"\".concat(progress,\"%\")}})})]})]}),results.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Normalization Results\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border rounded-lg \".concat(getStepColor('statute_name_normalizer')),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[getStepIcon('statute_name_normalizer'),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:\"Statute Name Normalization\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Clean and standardize statute names with enhanced logic\"})]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs font-medium rounded-full \".concat(getStepStatus('statute_name_normalizer')==='success'?'bg-green-100 text-green-800':getStepStatus('statute_name_normalizer')==='failed'?'bg-red-100 text-red-800':'bg-gray-100 text-gray-800'),children:getStepStatus('statute_name_normalizer')})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border rounded-lg \".concat(getStepColor('structure_cleaner')),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[getStepIcon('structure_cleaner'),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:\"Structure Cleaning\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Standardize database schema and field names with enhanced mapping\"})]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs font-medium rounded-full \".concat(getStepStatus('structure_cleaner')==='success'?'bg-green-100 text-green-800':getStepStatus('structure_cleaner')==='failed'?'bg-red-100 text-red-800':'bg-gray-100 text-gray-800'),children:getStepStatus('structure_cleaner')})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border rounded-lg \".concat(getStepColor('alphabetical_sorter')),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[getStepIcon('alphabetical_sorter'),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:\"Alphabetical Sorting\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Sort statutes alphabetically with enhanced year-based grouping\"})]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs font-medium rounded-full \".concat(getStepStatus('alphabetical_sorter')==='success'?'bg-green-100 text-green-800':getStepStatus('alphabetical_sorter')==='failed'?'bg-red-100 text-red-800':'bg-gray-100 text-gray-800'),children:getStepStatus('alphabetical_sorter')})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-3\",children:\"Detailed Results\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:results.map((result,index)=>/*#__PURE__*/_jsxs(\"details\",{className:\"border border-gray-200 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"summary\",{className:\"px-4 py-3 cursor-pointer hover:bg-gray-50 font-medium text-gray-900\",children:[result.script_name,\" - \",result.success?'Success':'Failed']}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 pb-3 space-y-2\",children:[result.stdout&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-700 mb-1\",children:\"Output:\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"text-xs bg-gray-100 p-2 rounded overflow-x-auto\",children:result.stdout})]}),result.stderr&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-700 mb-1\",children:\"Errors:\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"text-xs bg-red-100 p-2 rounded overflow-x-auto text-red-700\",children:result.stderr})]}),result.error&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-700 mb-1\",children:\"Error:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-red-700\",children:result.error})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"Executed at: \",new Date(result.executed_at).toLocaleString()]})]})]},index))})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 border border-red-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-5 w-5 text-red-400 mr-2\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-red-800\",children:\"Error\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-700 mt-1\",children:error})]}),connectionTest&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Connection Test Results\"}),/*#__PURE__*/_jsx(\"div\",{className:\"border rounded-lg p-4 \".concat(connectionTest.success?'bg-green-50 border-green-200':'bg-red-50 border-red-200'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[connectionTest.success?/*#__PURE__*/_jsx(CheckCircle,{className:\"h-5 w-5 text-green-400 mr-2\"}):/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-5 w-5 text-red-400 mr-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(connectionTest.success?'text-green-800':'text-red-800'),children:connectionTest.message})]})}),connectionTest.success&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded border\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-700\",children:\"Database\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900\",children:connectionTest.database})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded border\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-700\",children:\"Source Collection\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900\",children:connectionTest.source_collection})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded border\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-700\",children:\"Document Count\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900\",children:connectionTest.source_document_count})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded border\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-700\",children:\"Test Time\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900\",children:new Date(connectionTest.tested_at).toLocaleString()})]})]})]}),debugScript&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Debug Script Results\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-50 border border-green-200 rounded-lg p-4 mb-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-800\",children:debugScript.message})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:\"Configuration Used\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 p-3 rounded border\",children:/*#__PURE__*/_jsx(\"pre\",{className:\"text-xs text-gray-700 overflow-x-auto\",children:JSON.stringify(debugScript.config,null,2)})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:\"Generated Script\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 p-3 rounded border\",children:/*#__PURE__*/_jsx(\"pre\",{className:\"text-xs text-gray-700 overflow-x-auto whitespace-pre-wrap\",children:debugScript.script_content})})]})]})]}),testResults&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Test Results\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-50 border border-green-200 rounded-lg p-4 mb-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-800\",children:testResults.message})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:\"Sample Documents (Before)\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:testResults.sample_documents.map((doc,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm bg-gray-50 p-2 rounded border\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Statute Name:\"}),\" \",doc.Statute_Name||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Section:\"}),\" \",doc.Section||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Year:\"}),\" \",doc.Year||'N/A']})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:\"Normalized Documents (After)\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:testResults.normalized_documents.map((doc,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm bg-green-50 p-2 rounded border\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Statute Name:\"}),\" \",doc.Statute_Name||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Section Number:\"}),\" \",doc.Section_Number||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Section Definition:\"}),\" \",doc.Section_Definition||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Year:\"}),\" \",doc.Year||'N/A']})]},index))})]})]})]}),logicTestResults&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Normalization Logic Test Results\"}),/*#__PURE__*/_jsx(\"div\",{className:\"border rounded-lg p-4 \".concat(logicTestResults.success?'bg-green-50 border-green-200':'bg-red-50 border-red-200'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[logicTestResults.success?/*#__PURE__*/_jsx(CheckCircle,{className:\"h-5 w-5 text-green-400 mr-2\"}):/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-5 w-5 text-red-400 mr-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(logicTestResults.success?'text-green-800':'text-red-800'),children:logicTestResults.message})]})}),logicTestResults.success&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded border\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-700\",children:\"Tested At\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900\",children:new Date(logicTestResults.tested_at).toLocaleString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded border\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-700 mb-2\",children:\"Name Normalization Tests\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:(_logicTestResults$nam=logicTestResults.name_normalization)===null||_logicTestResults$nam===void 0?void 0:_logicTestResults$nam.map((test,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs bg-white p-2 rounded border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Original:\"}),\" \",test.original||'null']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Normalized:\"}),\" \",test.normalized||'null']})]}),!test.success&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-red-600 mt-1\",children:[\"Error: \",test.error]})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded border\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-700 mb-2\",children:\"Section Extraction Tests\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:(_logicTestResults$sec=logicTestResults.section_extraction)===null||_logicTestResults$sec===void 0?void 0:_logicTestResults$sec.map((test,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs bg-white p-2 rounded border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Original:\"}),\" \",test.original||'null']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Extracted:\"}),\" \",test.extracted?\"Section \".concat(test.extracted.section_number,\": \").concat(test.extracted.definition):'null']})]}),!test.success&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-red-600 mt-1\",children:[\"Error: \",test.error]})]},index))})]})]}),logicTestResults.error&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 bg-red-50 border border-red-200 rounded-lg p-3\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-red-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Error:\"}),\" \",logicTestResults.error]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-blue-800\",children:\"Enhanced Normalization Process\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:testConnection,className:\"inline-flex items-center px-3 py-1 text-xs font-medium rounded border border-blue-300 text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"h-3 w-3 mr-1\"}),\"Test Connection\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:generateDebugScript,className:\"inline-flex items-center px-3 py-1 text-xs font-medium rounded border border-blue-300 text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(Download,{className:\"h-3 w-3 mr-1\"}),\"Debug Script\"]})]})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-sm text-blue-700 space-y-1\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Statute Name Normalization:\"}),\" Enhanced logic for cleaning names, extracting section info, and handling legal prefixes\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Structure Cleaning:\"}),\" Advanced field mapping with support for all schema fields including content and metadata\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Alphabetical Sorting:\"}),\" Smart sorting with year-based grouping within statute name categories\"]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-blue-600 mt-2\",children:[\"The process creates collections: \",/*#__PURE__*/_jsx(\"code\",{children:\"normalized_statutes\"}),\" \\u2192 \",/*#__PURE__*/_jsx(\"code\",{children:\"cleaned_statutes\"}),\" \\u2192 \",/*#__PURE__*/_jsx(\"code\",{children:\"sorted_statutes\"})]})]}),showRollbackConfirm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100\",children:/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-6 w-6 text-red-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mt-4\",children:\"Confirm Rollback\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 px-7 py-3\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Are you sure you want to rollback all normalization changes? This will delete all normalized, cleaned, and sorted collections.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center space-x-4 mt-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowRollbackConfirm(false),className:\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:rollbackNormalization,className:\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500\",children:\"Confirm Rollback\"})]})]})})}),showNewCollectionModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Create New Collection\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Collection Type\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"source\",checked:newCollectionType==='source',onChange:e=>setNewCollectionType(e.target.value),className:\"mr-2\"}),\"Source Collection\"]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"target\",checked:newCollectionType==='target',onChange:e=>setNewCollectionType(e.target.value),className:\"mr-2\"}),\"Target Collection\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Collection Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newCollectionName,onChange:e=>setNewCollectionName(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",placeholder:\"Enter collection name\",onKeyPress:e=>e.key==='Enter'&&handleNewCollection()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowNewCollectionModal(false);setNewCollectionName('');},className:\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNewCollection,disabled:!newCollectionName.trim(),className:\"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:\"Create Collection\"})]})]})]})})}),showNewDatabaseModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Create New Database\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Database Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newDatabaseName,onChange:e=>setNewDatabaseName(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\",placeholder:\"Enter database name\",onKeyPress:e=>e.key==='Enter'&&handleNewDatabase()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowNewDatabaseModal(false);setNewDatabaseName('');},className:\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNewDatabase,disabled:!newDatabaseName.trim(),className:\"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:\"Create Database\"})]})]})]})})}),configSaved&&/*#__PURE__*/_jsxs(\"div\",{className:\"fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded-md shadow-lg z-50\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"h-4 w-4 mr-2\"}),\"Configuration Saved!\"]})]});};export default DatabaseNormalization;","map":{"version":3,"names":["React","useState","useEffect","Play","RotateCcw","Eye","Download","AlertTriangle","CheckCircle","Clock","axios","jsx","_jsx","jsxs","_jsxs","DatabaseNormalization","_ref","_databaseInfo$collect","_databaseInfo$collect2","_logicTestResults$nam","_logicTestResults$sec","config","propConfig","onStatusUpdate","onConfigUpdate","setConfig","mongo_uri","source_db","source_collection","target_db","target_collection","isRunning","setIsRunning","currentStep","setCurrentStep","progress","setProgress","results","setResults","error","setError","showConfig","setShowConfig","testResults","setTestResults","connectionTest","setConnectionTest","debugScript","setDebugScript","showRollbackConfirm","setShowRollbackConfirm","databaseInfo","setDatabaseInfo","databases","collections","isLoadingDatabases","setIsLoadingDatabases","showNewCollectionModal","setShowNewCollectionModal","newCollectionName","setNewCollectionName","newCollectionType","setNewCollectionType","showNewDatabaseModal","setShowNewDatabaseModal","newDatabaseName","setNewDatabaseName","logicTestResults","setLogicTestResults","configSaved","setConfigSaved","handleConfigChange","field","value","newConfig","_objectSpread","setTimeout","fetchDatabases","response","get","data","success","prev","dbName","collResponse","concat","err","console","warn","refreshCollections","databaseName","handleDatabaseChange","handleNewCollection","trim","post","database","collection_name","Error","message","_err$response","_err$response$data","detail","handleNewDatabase","database_name","_err$response2","_err$response2$data","testConnection","_err$response3","_err$response3$data","generateDebugScript","_err$response4","_err$response4$data","testNormalization","_err$response5","_err$response5$data","testNormalizationLogic","startNormalization","scriptsResponse","normalizationResponse","_err$response6","_err$response6$data","handleRollbackClick","rollbackNormalization","_err$response7","_err$response7$data","getStepStatus","stepName","result","find","r","script_name","getStepIcon","status","className","getStepColor","exportConfig","configData","exported_at","Date","toISOString","version","blob","Blob","JSON","stringify","type","url","URL","createObjectURL","a","document","createElement","href","download","split","body","appendChild","click","removeChild","revokeObjectURL","importConfig","event","_event$target$files","file","target","files","reader","FileReader","onload","e","_e$target","importedConfig","parse","validConfig","alert","readAsText","children","onClick","title","accept","onChange","placeholder","disabled","map","db","coll","length","style","width","index","stdout","stderr","executed_at","toLocaleString","source_document_count","tested_at","script_content","sample_documents","doc","Statute_Name","Section","Year","normalized_documents","Section_Number","Section_Definition","name_normalization","test","original","normalized","section_extraction","extracted","section_number","definition","checked","onKeyPress","key"],"sources":["D:/DigiFloat/LawChronicle/frontend/src/components/phase2/DatabaseNormalization.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Play, RotateCcw, Eye, Download, AlertTriangle, CheckCircle, Clock } from 'lucide-react';\r\nimport axios from 'axios';\r\n\r\ninterface DatabaseNormalizationProps {\r\n  config: any;\r\n  onStatusUpdate?: () => void;\r\n  onConfigUpdate?: (updates: any) => void;\r\n}\r\n\r\ninterface NormalizationConfig {\r\n  mongo_uri: string;\r\n  source_db: string;\r\n  source_collection: string;\r\n  target_db: string;\r\n  target_collection: string;\r\n}\r\n\r\ninterface DatabaseInfo {\r\n  databases: string[];\r\n  collections: { [key: string]: string[] };\r\n}\r\n\r\ninterface NormalizationResult {\r\n  success: boolean;\r\n  script_name: string;\r\n  stdout: string;\r\n  stderr: string;\r\n  return_code: number;\r\n  executed_at: string;\r\n  error?: string;\r\n}\r\n\r\nconst DatabaseNormalization: React.FC<DatabaseNormalizationProps> = ({ config: propConfig, onStatusUpdate, onConfigUpdate }) => {\r\n  const [config, setConfig] = useState<NormalizationConfig>({\r\n    mongo_uri: propConfig?.mongo_uri || 'mongodb://localhost:27017',\r\n    source_db: propConfig?.source_db || 'Statutes',\r\n    source_collection: propConfig?.source_collection || 'raw_statutes',\r\n    target_db: propConfig?.target_db || 'Statutes',\r\n    target_collection: propConfig?.target_collection || 'normalized_statutes'\r\n  });\r\n  \r\n  const [isRunning, setIsRunning] = useState(false);\r\n  const [currentStep, setCurrentStep] = useState<string>('');\r\n  const [progress, setProgress] = useState<number>(0);\r\n  const [results, setResults] = useState<NormalizationResult[]>([]);\r\n  const [error, setError] = useState<string>('');\r\n  const [showConfig, setShowConfig] = useState(false);\r\n  const [testResults, setTestResults] = useState<any>(null);\r\n  const [connectionTest, setConnectionTest] = useState<any>(null);\r\n  const [debugScript, setDebugScript] = useState<any>(null);\r\n  const [showRollbackConfirm, setShowRollbackConfirm] = useState(false);\r\n  const [databaseInfo, setDatabaseInfo] = useState<DatabaseInfo>({ databases: [], collections: {} });\r\n  const [isLoadingDatabases, setIsLoadingDatabases] = useState(false);\r\n  const [showNewCollectionModal, setShowNewCollectionModal] = useState(false);\r\n  const [newCollectionName, setNewCollectionName] = useState('');\r\n  const [newCollectionType, setNewCollectionType] = useState<'source' | 'target'>('source');\r\n  const [showNewDatabaseModal, setShowNewDatabaseModal] = useState(false);\r\n  const [newDatabaseName, setNewDatabaseName] = useState('');\r\n  const [logicTestResults, setLogicTestResults] = useState<any>(null);\r\n  const [configSaved, setConfigSaved] = useState(false);\r\n\r\n  const handleConfigChange = (field: keyof NormalizationConfig, value: string) => {\r\n    const newConfig = {\r\n      ...config,\r\n      [field]: value\r\n    };\r\n    \r\n    setConfig(newConfig);\r\n    \r\n    // Update parent configuration\r\n    if (onConfigUpdate) {\r\n      onConfigUpdate({ [field]: value });\r\n    }\r\n    \r\n    // Show saved indicator\r\n    setConfigSaved(true);\r\n    setTimeout(() => setConfigSaved(false), 2000);\r\n    \r\n    // Also update the parent config if onStatusUpdate is available\r\n    if (onStatusUpdate) {\r\n      onStatusUpdate();\r\n    }\r\n  };\r\n\r\n  const fetchDatabases = async () => {\r\n    try {\r\n      setIsLoadingDatabases(true);\r\n      const response = await axios.get('/api/v1/phase2/databases');\r\n      if (response.data.success) {\r\n        const databases = response.data.databases;\r\n        setDatabaseInfo(prev => ({ ...prev, databases }));\r\n        \r\n        // Fetch collections for each database\r\n        const collections: { [key: string]: string[] } = {};\r\n        for (const dbName of databases) {\r\n          try {\r\n            const collResponse = await axios.get(`/api/v1/phase2/collections/${dbName}`);\r\n            if (collResponse.data.success) {\r\n              collections[dbName] = collResponse.data.collections;\r\n            }\r\n          } catch (err) {\r\n            console.warn(`Failed to fetch collections for ${dbName}:`, err);\r\n            collections[dbName] = [];\r\n          }\r\n        }\r\n        setDatabaseInfo(prev => ({ ...prev, collections }));\r\n      }\r\n    } catch (err: any) {\r\n      console.error('Failed to fetch databases:', err);\r\n    } finally {\r\n      setIsLoadingDatabases(false);\r\n    }\r\n  };\r\n\r\n  const refreshCollections = async (databaseName: string) => {\r\n    try {\r\n      const response = await axios.get(`/api/v1/phase2/collections/${databaseName}`);\r\n      if (response.data.success) {\r\n        setDatabaseInfo(prev => ({\r\n          ...prev,\r\n          collections: {\r\n            ...prev.collections,\r\n            [databaseName]: response.data.collections\r\n          }\r\n        }));\r\n      }\r\n    } catch (err: any) {\r\n      console.error(`Failed to refresh collections for ${databaseName}:`, err);\r\n    }\r\n  };\r\n\r\n  const handleDatabaseChange = async (field: 'source_db' | 'target_db', value: string) => {\r\n    setConfig(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n    \r\n    // Reset collection if database changes\r\n    if (field === 'source_db') {\r\n      setConfig(prev => ({ ...prev, source_collection: '' }));\r\n    } else {\r\n      setConfig(prev => ({ ...prev, target_collection: '' }));\r\n    }\r\n  };\r\n\r\n  const handleNewCollection = async () => {\r\n    if (newCollectionName.trim()) {\r\n      try {\r\n        // Create the collection in MongoDB\r\n        const response = await axios.post('/api/v1/phase2/create-collection', {\r\n          database: newCollectionType === 'source' ? config.source_db : config.target_db,\r\n          collection_name: newCollectionName.trim()\r\n        });\r\n        \r\n        if (response.data.success) {\r\n          // Update local config\r\n          if (newCollectionType === 'source') {\r\n            setConfig(prev => ({ ...prev, source_collection: newCollectionName.trim() }));\r\n          } else {\r\n            setConfig(prev => ({ ...prev, target_collection: newCollectionName.trim() }));\r\n          }\r\n          \r\n          // Refresh collections for the relevant database\r\n          if (newCollectionType === 'source') {\r\n            await refreshCollections(config.source_db);\r\n          } else {\r\n            await refreshCollections(config.target_db);\r\n          }\r\n          \r\n          setNewCollectionName('');\r\n          setShowNewCollectionModal(false);\r\n        } else {\r\n          throw new Error(response.data.message || 'Failed to create collection');\r\n        }\r\n      } catch (err: any) {\r\n        setError(err.response?.data?.detail || err.message || 'Failed to create collection');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleNewDatabase = async () => {\r\n    if (newDatabaseName.trim()) {\r\n      try {\r\n        // Create the database in MongoDB\r\n        const response = await axios.post('/api/v1/phase2/create-database', {\r\n          database_name: newDatabaseName.trim()\r\n        });\r\n        \r\n        if (response.data.success) {\r\n          // Refresh databases list\r\n          await fetchDatabases();\r\n          \r\n          setNewDatabaseName('');\r\n          setShowNewDatabaseModal(false);\r\n        } else {\r\n          throw new Error(response.data.message || 'Failed to create database');\r\n        }\r\n      } catch (err: any) {\r\n        setError(err.response?.data?.detail || err.message || 'Failed to create database');\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchDatabases();\r\n  }, []);\r\n\r\n  // Update local config when propConfig changes\r\n  useEffect(() => {\r\n    if (propConfig) {\r\n      setConfig({\r\n        mongo_uri: propConfig.mongo_uri || 'mongodb://localhost:27017',\r\n        source_db: propConfig.source_db || 'Statutes',\r\n        source_collection: propConfig.source_collection || 'raw_statutes',\r\n        target_db: propConfig.target_db || 'Statutes',\r\n        target_collection: propConfig.target_collection || 'normalized_statutes'\r\n      });\r\n    }\r\n  }, [propConfig]);\r\n\r\n  const testConnection = async () => {\r\n    try {\r\n      setError('');\r\n      setConnectionTest(null);\r\n      setCurrentStep('Testing MongoDB connection...');\r\n      \r\n      const response = await axios.post('/api/v1/phase2/test-connection');\r\n      \r\n      if (response.data.success) {\r\n        setConnectionTest(response.data);\r\n        setCurrentStep('Connection test completed successfully!');\r\n      } else {\r\n        throw new Error(response.data.message || 'Connection test failed');\r\n      }\r\n      \r\n    } catch (err: any) {\r\n      setError(err.response?.data?.detail || err.message || 'Connection test failed');\r\n      setCurrentStep('');\r\n    }\r\n  };\r\n\r\n  const generateDebugScript = async () => {\r\n    try {\r\n      setError('');\r\n      setDebugScript(null);\r\n      setCurrentStep('Generating debug script...');\r\n      \r\n      const response = await axios.post('/api/v1/phase2/debug-script', config);\r\n      \r\n      if (response.data.success) {\r\n        setDebugScript(response.data);\r\n        setCurrentStep('Debug script generated successfully!');\r\n      } else {\r\n        throw new Error(response.data.message || 'Debug script generation failed');\r\n      }\r\n      \r\n    } catch (err: any) {\r\n      setError(err.response?.data?.detail || err.message || 'Debug script generation failed');\r\n      setCurrentStep('');\r\n    }\r\n  };\r\n\r\n  const testNormalization = async () => {\r\n    try {\r\n      setError('');\r\n      setTestResults(null);\r\n      setCurrentStep('Testing normalization with sample data...');\r\n      \r\n      const response = await axios.post('/api/v1/phase2/test-normalization', config);\r\n      \r\n      if (response.data.success) {\r\n        setTestResults(response.data);\r\n        setCurrentStep('Test completed successfully!');\r\n      } else {\r\n        throw new Error(response.data.message || 'Test failed');\r\n      }\r\n      \r\n    } catch (err: any) {\r\n      setError(err.response?.data?.detail || err.message || 'Test failed');\r\n      setCurrentStep('');\r\n    }\r\n  };\r\n\r\n  const testNormalizationLogic = async () => {\r\n    try {\r\n      setLogicTestResults(null);\r\n      const response = await axios.post('/api/v1/phase2/test-normalization-logic');\r\n      if (response.data.success) {\r\n        setLogicTestResults(response.data);\r\n      }\r\n    } catch (err: any) {\r\n      console.error('Failed to test normalization logic:', err);\r\n      setLogicTestResults({ error: err.message });\r\n    }\r\n  };\r\n\r\n  const startNormalization = async () => {\r\n    setIsRunning(true);\r\n    setError('');\r\n    setResults([]);\r\n    setProgress(0);\r\n    setCurrentStep('Initializing...');\r\n\r\n    try {\r\n      // Step 1: Generate scripts\r\n      setCurrentStep('Generating normalization scripts...');\r\n      setProgress(10);\r\n      \r\n      const scriptsResponse = await axios.post('/api/v1/phase2/generate-scripts', config);\r\n      if (!scriptsResponse.data.success) {\r\n        throw new Error('Failed to generate scripts');\r\n      }\r\n\r\n      // Step 2: Execute normalization\r\n      setCurrentStep('Executing normalization process...');\r\n      setProgress(30);\r\n      \r\n      const normalizationResponse = await axios.post('/api/v1/phase2/execute-normalization', config);\r\n      \r\n      if (normalizationResponse.data.success) {\r\n        setResults(normalizationResponse.data.results);\r\n        setProgress(100);\r\n        setCurrentStep('Normalization completed successfully!');\r\n        \r\n        // Update status in parent component\r\n        if (onStatusUpdate) {\r\n          onStatusUpdate();\r\n        }\r\n      } else {\r\n        throw new Error(normalizationResponse.data.message || 'Normalization failed');\r\n      }\r\n      \r\n    } catch (err: any) {\r\n      setError(err.response?.data?.detail || err.message || 'An error occurred during normalization');\r\n      setCurrentStep('Normalization failed');\r\n    } finally {\r\n      setIsRunning(false);\r\n    }\r\n  };\r\n\r\n  const handleRollbackClick = () => {\r\n    setShowRollbackConfirm(true);\r\n  };\r\n\r\n  const rollbackNormalization = async () => {\r\n    try {\r\n      setError('');\r\n      setCurrentStep('Rolling back changes...');\r\n      \r\n      const response = await axios.post('/api/v1/phase2/rollback');\r\n      \r\n      if (response.data.success) {\r\n        setResults([]);\r\n        setProgress(0);\r\n        setCurrentStep('Rollback completed successfully');\r\n        \r\n        // Update status in parent component\r\n        if (onStatusUpdate) {\r\n          onStatusUpdate();\r\n        }\r\n      } else {\r\n        throw new Error('Rollback failed');\r\n      }\r\n      \r\n    } catch (err: any) {\r\n      setError(err.response?.data?.detail || err.message || 'Rollback failed');\r\n    } finally {\r\n      setCurrentStep('');\r\n      setShowRollbackConfirm(false);\r\n    }\r\n  };\r\n\r\n  const getStepStatus = (stepName: string) => {\r\n    const result = results.find(r => r.script_name === stepName);\r\n    if (!result) return 'pending';\r\n    return result.success ? 'success' : 'failed';\r\n  };\r\n\r\n  const getStepIcon = (stepName: string) => {\r\n    const status = getStepStatus(stepName);\r\n    switch (status) {\r\n      case 'success':\r\n        return <CheckCircle className=\"h-5 w-5 text-green-500\" />;\r\n      case 'failed':\r\n        return <AlertTriangle className=\"h-5 w-5 text-red-500\" />;\r\n      case 'pending':\r\n        return <Clock className=\"h-5 w-5 text-gray-400\" />;\r\n      default:\r\n        return <Clock className=\"h-5 w-5 text-gray-400\" />;\r\n    }\r\n  };\r\n\r\n  const getStepColor = (stepName: string) => {\r\n    const status = getStepStatus(stepName);\r\n    switch (status) {\r\n      case 'success':\r\n        return 'bg-green-50 border-green-200';\r\n      case 'failed':\r\n        return 'bg-red-50 border-red-200';\r\n      case 'pending':\r\n        return 'bg-gray-50 border-gray-200';\r\n      default:\r\n        return 'bg-gray-50 border-gray-200';\r\n    }\r\n  };\r\n\r\n  // Export configuration to JSON file\r\n  const exportConfig = () => {\r\n    const configData = {\r\n      ...config,\r\n      exported_at: new Date().toISOString(),\r\n      version: '1.0'\r\n    };\r\n    \r\n    const blob = new Blob([JSON.stringify(configData, null, 2)], { type: 'application/json' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `lawchronicle_config_${new Date().toISOString().split('T')[0]}.json`;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  // Import configuration from JSON file\r\n  const importConfig = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      try {\r\n        const importedConfig = JSON.parse(e.target?.result as string);\r\n        \r\n        // Validate and merge configuration\r\n        const validConfig = {\r\n          mongo_uri: importedConfig.mongo_uri || config.mongo_uri,\r\n          source_db: importedConfig.source_db || config.source_db,\r\n          source_collection: importedConfig.source_collection || config.source_collection,\r\n          target_db: importedConfig.target_db || config.target_db,\r\n          target_collection: importedConfig.target_collection || config.target_collection\r\n        };\r\n        \r\n        setConfig(validConfig);\r\n        \r\n        // Update parent configuration\r\n        if (onConfigUpdate) {\r\n          onConfigUpdate(validConfig);\r\n        }\r\n        \r\n        setConfigSaved(true);\r\n        setTimeout(() => setConfigSaved(false), 2000);\r\n        \r\n      } catch (error) {\r\n        alert('Invalid configuration file. Please check the format.');\r\n      }\r\n    };\r\n    reader.readAsText(file);\r\n    \r\n    // Reset file input\r\n    event.target.value = '';\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Configuration Panel */}\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900\">Normalization Configuration</h2>\r\n          <div className=\"flex items-center space-x-3\">\r\n            {isLoadingDatabases && (\r\n              <div className=\"flex items-center text-sm text-gray-500\">\r\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600 mr-2\"></div>\r\n                Loading databases...\r\n              </div>\r\n            )}\r\n            <div className=\"flex items-center space-x-2\">\r\n              <button\r\n                onClick={exportConfig}\r\n                className=\"px-3 py-1 text-sm text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                title=\"Export configuration\"\r\n              >\r\n                📤 Export\r\n              </button>\r\n              <label className=\"px-3 py-1 text-sm text-green-600 bg-green-50 border border-green-200 rounded-md hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-green-500 cursor-pointer\">\r\n                📥 Import\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\".json\"\r\n                  onChange={importConfig}\r\n                  className=\"hidden\"\r\n                />\r\n              </label>\r\n            </div>\r\n            <button\r\n              onClick={() => setShowConfig(!showConfig)}\r\n              className=\"text-sm text-primary-600 hover:text-primary-800\"\r\n            >\r\n              {showConfig ? 'Hide' : 'Show'} Configuration\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n                 {showConfig && (\r\n           <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\r\n             <div>\r\n               <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                 MongoDB URI\r\n               </label>\r\n               <input\r\n                 type=\"text\"\r\n                 value={config.mongo_uri}\r\n                 onChange={(e) => handleConfigChange('mongo_uri', e.target.value)}\r\n                 className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                 placeholder=\"mongodb://localhost:27017\"\r\n               />\r\n             </div>\r\n             \r\n             <div>\r\n               <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                 Source Database\r\n               </label>\r\n               <div className=\"flex space-x-2\">\r\n                 <select\r\n                   value={config.source_db}\r\n                   onChange={(e) => handleDatabaseChange('source_db', e.target.value)}\r\n                   className=\"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                   disabled={isLoadingDatabases}\r\n                 >\r\n                   <option value=\"\">Select Database</option>\r\n                   {databaseInfo.databases.map((db) => (\r\n                     <option key={db} value={db}>{db}</option>\r\n                   ))}\r\n                 </select>\r\n                 <button\r\n                   onClick={() => fetchDatabases()}\r\n                   disabled={isLoadingDatabases}\r\n                   className=\"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                   title=\"Refresh databases\"\r\n                 >\r\n                   🔄\r\n                 </button>\r\n                 <button\r\n                   onClick={() => setShowNewDatabaseModal(true)}\r\n                   disabled={isLoadingDatabases}\r\n                   className=\"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                   title=\"Create new database\"\r\n                 >\r\n                   ➕\r\n                 </button>\r\n               </div>\r\n             </div>\r\n             \r\n             <div>\r\n               <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                 Source Collection\r\n               </label>\r\n                                <div className=\"flex space-x-2\">\r\n                   <select\r\n                     value={config.source_collection}\r\n                     onChange={(e) => handleConfigChange('source_collection', e.target.value)}\r\n                     className=\"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                     disabled={!config.source_db || isLoadingDatabases}\r\n                   >\r\n                     <option value=\"\">Select Collection</option>\r\n                     {config.source_db && databaseInfo.collections[config.source_db]?.map((coll) => (\r\n                       <option key={coll} value={coll}>{coll}</option>\r\n                     ))}\r\n                   </select>\r\n                   <button\r\n                     onClick={() => {\r\n                       if (config.source_db) {\r\n                         refreshCollections(config.source_db);\r\n                       }\r\n                     }}\r\n                     disabled={!config.source_db || isLoadingDatabases}\r\n                     className=\"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                     title=\"Refresh collections\"\r\n                   >\r\n                     🔄\r\n                   </button>\r\n                   <button\r\n                     onClick={() => {\r\n                       setNewCollectionType('source');\r\n                       setShowNewCollectionModal(true);\r\n                     }}\r\n                     className=\"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                     title=\"Create new collection\"\r\n                   >\r\n                     ➕\r\n                 </button>\r\n               </div>\r\n               <p className=\"text-xs text-gray-500 mt-1\">Input collection containing raw statute data</p>\r\n             </div>\r\n             \r\n             <div>\r\n               <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                 Target Database\r\n               </label>\r\n               <div className=\"flex space-x-2\">\r\n                 <select\r\n                   value={config.target_db}\r\n                   onChange={(e) => handleDatabaseChange('target_db', e.target.value)}\r\n                   className=\"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                   disabled={isLoadingDatabases}\r\n                 >\r\n                   <option value=\"\">Select Database</option>\r\n                   {databaseInfo.databases.map((db) => (\r\n                     <option key={db} value={db}>{db}</option>\r\n                   ))}\r\n                 </select>\r\n                 <button\r\n                   onClick={() => fetchDatabases()}\r\n                   disabled={isLoadingDatabases}\r\n                   className=\"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                   title=\"Refresh databases\"\r\n                 >\r\n                   🔄\r\n                 </button>\r\n                 <button\r\n                   onClick={() => setShowNewDatabaseModal(true)}\r\n                   disabled={isLoadingDatabases}\r\n                   className=\"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                   title=\"Create new database\"\r\n                 >\r\n                   ➕\r\n                 </button>\r\n               </div>\r\n             </div>\r\n\r\n             <div>\r\n               <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                 Target Collection\r\n               </label>\r\n               <div className=\"flex space-x-2\">\r\n                 <select\r\n                   value={config.target_collection}\r\n                   onChange={(e) => handleConfigChange('target_collection', e.target.value)}\r\n                   className=\"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                   disabled={!config.target_db || isLoadingDatabases}\r\n                 >\r\n                   <option value=\"\">Select Collection</option>\r\n                   {config.target_db && databaseInfo.collections[config.target_db]?.map((coll) => (\r\n                     <option key={coll} value={coll}>{coll}</option>\r\n                   ))}\r\n                 </select>\r\n                                    <button\r\n                     onClick={() => {\r\n                       if (config.target_db) {\r\n                         refreshCollections(config.target_db);\r\n                       }\r\n                     }}\r\n                     disabled={!config.target_db || isLoadingDatabases}\r\n                     className=\"px-2 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                     title=\"Refresh collections\"\r\n                   >\r\n                     🔄\r\n                   </button>\r\n                 <button\r\n                   onClick={() => {\r\n                     setNewCollectionType('target');\r\n                     setShowNewCollectionModal(true);\r\n                   }}\r\n                   className=\"px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                   title=\"Create new collection\"\r\n                   disabled={!config.target_db}\r\n                 >\r\n                   ➕\r\n                 </button>\r\n               </div>\r\n               <p className=\"text-xs text-gray-500 mt-1\">Output collection for normalized data</p>\r\n             </div>\r\n           </div>\r\n         )}\r\n        \r\n        <div className=\"flex items-center space-x-4\">\r\n          <button\r\n            onClick={testConnection}\r\n            disabled={isRunning}\r\n            className=\"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <CheckCircle className=\"h-4 w-4 mr-2\" />\r\n            Test Connection\r\n          </button>\r\n          \r\n          <button\r\n            onClick={generateDebugScript}\r\n            disabled={isRunning}\r\n            className=\"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <Download className=\"h-4 w-4 mr-2\" />\r\n            Debug Script\r\n          </button>\r\n          \r\n          <button\r\n            onClick={testNormalization}\r\n            disabled={isRunning}\r\n            className=\"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <Eye className=\"h-4 w-4 mr-2\" />\r\n            Test Sample\r\n          </button>\r\n\r\n          <button\r\n            onClick={testNormalizationLogic}\r\n            disabled={isRunning}\r\n            className=\"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <Eye className=\"h-4 w-4 mr-2\" />\r\n            Test Logic\r\n          </button>\r\n          \r\n          <button\r\n            onClick={startNormalization}\r\n            disabled={isRunning}\r\n            className=\"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <Play className=\"h-5 w-5 mr-2\" />\r\n            {isRunning ? 'Running...' : 'Start Normalization'}\r\n          </button>\r\n          \r\n          <button\r\n            onClick={handleRollbackClick}\r\n            disabled={isRunning || results.length === 0}\r\n            className=\"inline-flex items-center px-6 py-3 border border-gray-300 text-base font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <RotateCcw className=\"h-5 w-5 mr-2\" />\r\n            Rollback Changes\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Progress and Status */}\r\n      {isRunning && (\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Normalization Progress</h3>\r\n          \r\n          <div className=\"mb-4\">\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <span className=\"text-sm font-medium text-gray-700\">{currentStep}</span>\r\n              <span className=\"text-sm font-medium text-gray-700\">{progress}%</span>\r\n            </div>\r\n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n              <div\r\n                className=\"bg-primary-600 h-2 rounded-full transition-all duration-300\"\r\n                style={{ width: `${progress}%` }}\r\n              ></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Results */}\r\n      {results.length > 0 && (\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Normalization Results</h3>\r\n          \r\n          <div className=\"space-y-4\">\r\n            {/* Step 1: Statute Name Normalization */}\r\n            <div className={`p-4 border rounded-lg ${getStepColor('statute_name_normalizer')}`}>\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  {getStepIcon('statute_name_normalizer')}\r\n                  <div>\r\n                    <h4 className=\"font-medium text-gray-900\">Statute Name Normalization</h4>\r\n                    <p className=\"text-sm text-gray-600\">Clean and standardize statute names with enhanced logic</p>\r\n                  </div>\r\n                </div>\r\n                <span className={`px-2 py-1 text-xs font-medium rounded-full ${\r\n                  getStepStatus('statute_name_normalizer') === 'success' \r\n                    ? 'bg-green-100 text-green-800' \r\n                    : getStepStatus('statute_name_normalizer') === 'failed'\r\n                    ? 'bg-red-100 text-red-800'\r\n                    : 'bg-gray-100 text-gray-800'\r\n                }`}>\r\n                  {getStepStatus('statute_name_normalizer')}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Step 2: Structure Cleaning */}\r\n            <div className={`p-4 border rounded-lg ${getStepColor('structure_cleaner')}`}>\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  {getStepIcon('structure_cleaner')}\r\n                  <div>\r\n                    <h4 className=\"font-medium text-gray-900\">Structure Cleaning</h4>\r\n                    <p className=\"text-sm text-gray-600\">Standardize database schema and field names with enhanced mapping</p>\r\n                  </div>\r\n                </div>\r\n                <span className={`px-2 py-1 text-xs font-medium rounded-full ${\r\n                  getStepStatus('structure_cleaner') === 'success' \r\n                    ? 'bg-green-100 text-green-800' \r\n                    : getStepStatus('structure_cleaner') === 'failed'\r\n                    ? 'bg-red-100 text-red-800'\r\n                    : 'bg-gray-100 text-gray-800'\r\n                }`}>\r\n                  {getStepStatus('structure_cleaner')}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Step 3: Alphabetical Sorting */}\r\n            <div className={`p-4 border rounded-lg ${getStepColor('alphabetical_sorter')}`}>\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  {getStepIcon('alphabetical_sorter')}\r\n                  <div>\r\n                    <h4 className=\"font-medium text-gray-900\">Alphabetical Sorting</h4>\r\n                    <p className=\"text-sm text-gray-600\">Sort statutes alphabetically with enhanced year-based grouping</p>\r\n                  </div>\r\n                </div>\r\n                <span className={`px-2 py-1 text-xs font-medium rounded-full ${\r\n                  getStepStatus('alphabetical_sorter') === 'success' \r\n                    ? 'bg-green-100 text-green-800' \r\n                    : getStepStatus('alphabetical_sorter') === 'failed'\r\n                    ? 'bg-red-100 text-red-800'\r\n                    : 'bg-gray-100 text-gray-800'\r\n                }`}>\r\n                  {getStepStatus('alphabetical_sorter')}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Detailed Results */}\r\n          <div className=\"mt-6\">\r\n            <h4 className=\"font-medium text-gray-900 mb-3\">Detailed Results</h4>\r\n            <div className=\"space-y-3\">\r\n              {results.map((result, index) => (\r\n                <details key={index} className=\"border border-gray-200 rounded-lg\">\r\n                  <summary className=\"px-4 py-3 cursor-pointer hover:bg-gray-50 font-medium text-gray-900\">\r\n                    {result.script_name} - {result.success ? 'Success' : 'Failed'}\r\n                  </summary>\r\n                  <div className=\"px-4 pb-3 space-y-2\">\r\n                    {result.stdout && (\r\n                      <div>\r\n                        <p className=\"text-sm font-medium text-gray-700 mb-1\">Output:</p>\r\n                        <pre className=\"text-xs bg-gray-100 p-2 rounded overflow-x-auto\">{result.stdout}</pre>\r\n                      </div>\r\n                    )}\r\n                    {result.stderr && (\r\n                      <div>\r\n                        <p className=\"text-sm font-medium text-gray-700 mb-1\">Errors:</p>\r\n                        <pre className=\"text-xs bg-red-100 p-2 rounded overflow-x-auto text-red-700\">{result.stderr}</pre>\r\n                      </div>\r\n                    )}\r\n                    {result.error && (\r\n                      <div>\r\n                        <p className=\"text-sm font-medium text-gray-700 mb-1\">Error:</p>\r\n                        <p className=\"text-xs text-red-700\">{result.error}</p>\r\n                      </div>\r\n                    )}\r\n                    <p className=\"text-xs text-gray-500\">\r\n                      Executed at: {new Date(result.executed_at).toLocaleString()}\r\n                    </p>\r\n                  </div>\r\n                </details>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Error Display */}\r\n      {error && (\r\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\r\n          <div className=\"flex items-center\">\r\n            <AlertTriangle className=\"h-5 w-5 text-red-400 mr-2\" />\r\n            <h3 className=\"text-sm font-medium text-red-800\">Error</h3>\r\n          </div>\r\n          <p className=\"text-sm text-red-700 mt-1\">{error}</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Connection Test Results */}\r\n      {connectionTest && (\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Connection Test Results</h3>\r\n          <div className={`border rounded-lg p-4 ${connectionTest.success ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}`}>\r\n            <div className=\"flex items-center\">\r\n              {connectionTest.success ? (\r\n                <CheckCircle className=\"h-5 w-5 text-green-400 mr-2\" />\r\n              ) : (\r\n                <AlertTriangle className=\"h-5 w-5 text-red-400 mr-2\" />\r\n              )}\r\n              <p className={`text-sm ${connectionTest.success ? 'text-green-800' : 'text-red-800'}`}>\r\n                {connectionTest.message}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          \r\n          {connectionTest.success && (\r\n            <div className=\"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div className=\"bg-gray-50 p-3 rounded border\">\r\n                <p className=\"text-sm font-medium text-gray-700\">Database</p>\r\n                <p className=\"text-sm text-gray-900\">{connectionTest.database}</p>\r\n              </div>\r\n              <div className=\"bg-gray-50 p-3 rounded border\">\r\n                <p className=\"text-sm font-medium text-gray-700\">Source Collection</p>\r\n                <p className=\"text-sm text-gray-900\">{connectionTest.source_collection}</p>\r\n              </div>\r\n              <div className=\"bg-gray-50 p-3 rounded border\">\r\n                <p className=\"text-sm font-medium text-gray-700\">Document Count</p>\r\n                <p className=\"text-sm text-gray-900\">{connectionTest.source_document_count}</p>\r\n              </div>\r\n              <div className=\"bg-gray-50 p-3 rounded border\">\r\n                <p className=\"text-sm font-medium text-gray-700\">Test Time</p>\r\n                <p className=\"text-sm text-gray-900\">{new Date(connectionTest.tested_at).toLocaleString()}</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Debug Script Results */}\r\n      {debugScript && (\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Debug Script Results</h3>\r\n          <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 mb-4\">\r\n            <p className=\"text-sm text-green-800\">{debugScript.message}</p>\r\n          </div>\r\n          \r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <h4 className=\"font-medium text-gray-900 mb-2\">Configuration Used</h4>\r\n              <div className=\"bg-gray-50 p-3 rounded border\">\r\n                <pre className=\"text-xs text-gray-700 overflow-x-auto\">\r\n                  {JSON.stringify(debugScript.config, null, 2)}\r\n                </pre>\r\n              </div>\r\n            </div>\r\n            \r\n            <div>\r\n              <h4 className=\"font-medium text-gray-900 mb-2\">Generated Script</h4>\r\n              <div className=\"bg-gray-50 p-3 rounded border\">\r\n                <pre className=\"text-xs text-gray-700 overflow-x-auto whitespace-pre-wrap\">\r\n                  {debugScript.script_content}\r\n                </pre>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Test Results */}\r\n      {testResults && (\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Test Results</h3>\r\n          <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 mb-4\">\r\n            <p className=\"text-sm text-green-800\">{testResults.message}</p>\r\n          </div>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            <div>\r\n              <h4 className=\"font-medium text-gray-900 mb-2\">Sample Documents (Before)</h4>\r\n              <div className=\"space-y-2\">\r\n                {testResults.sample_documents.map((doc: any, index: number) => (\r\n                  <div key={index} className=\"text-sm bg-gray-50 p-2 rounded border\">\r\n                    <p><strong>Statute Name:</strong> {doc.Statute_Name || 'N/A'}</p>\r\n                    <p><strong>Section:</strong> {doc.Section || 'N/A'}</p>\r\n                    <p><strong>Year:</strong> {doc.Year || 'N/A'}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n            \r\n            <div>\r\n              <h4 className=\"font-medium text-gray-900 mb-2\">Normalized Documents (After)</h4>\r\n              <div className=\"space-y-2\">\r\n                {testResults.normalized_documents.map((doc: any, index: number) => (\r\n                  <div key={index} className=\"text-sm bg-green-50 p-2 rounded border\">\r\n                    <p><strong>Statute Name:</strong> {doc.Statute_Name || 'N/A'}</p>\r\n                    <p><strong>Section Number:</strong> {doc.Section_Number || 'N/A'}</p>\r\n                    <p><strong>Section Definition:</strong> {doc.Section_Definition || 'N/A'}</p>\r\n                    <p><strong>Year:</strong> {doc.Year || 'N/A'}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Logic Test Results */}\r\n      {logicTestResults && (\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Normalization Logic Test Results</h3>\r\n          <div className={`border rounded-lg p-4 ${logicTestResults.success ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}`}>\r\n            <div className=\"flex items-center\">\r\n              {logicTestResults.success ? (\r\n                <CheckCircle className=\"h-5 w-5 text-green-400 mr-2\" />\r\n              ) : (\r\n                <AlertTriangle className=\"h-5 w-5 text-red-400 mr-2\" />\r\n              )}\r\n              <p className={`text-sm ${logicTestResults.success ? 'text-green-800' : 'text-red-800'}`}>\r\n                {logicTestResults.message}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          \r\n          {logicTestResults.success && (\r\n            <div className=\"mt-4 space-y-4\">\r\n              <div className=\"bg-gray-50 p-3 rounded border\">\r\n                <p className=\"text-sm font-medium text-gray-700\">Tested At</p>\r\n                <p className=\"text-sm text-gray-900\">{new Date(logicTestResults.tested_at).toLocaleString()}</p>\r\n              </div>\r\n              \r\n              {/* Name Normalization Results */}\r\n              <div className=\"bg-gray-50 p-3 rounded border\">\r\n                <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Name Normalization Tests</h4>\r\n                <div className=\"space-y-2\">\r\n                  {logicTestResults.name_normalization?.map((test: any, index: number) => (\r\n                    <div key={index} className=\"text-xs bg-white p-2 rounded border\">\r\n                      <div className=\"grid grid-cols-2 gap-2\">\r\n                        <div>\r\n                          <span className=\"font-medium\">Original:</span> {test.original || 'null'}\r\n                        </div>\r\n                        <div>\r\n                          <span className=\"font-medium\">Normalized:</span> {test.normalized || 'null'}\r\n                        </div>\r\n                      </div>\r\n                      {!test.success && (\r\n                        <div className=\"text-red-600 mt-1\">\r\n                          Error: {test.error}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Section Extraction Results */}\r\n              <div className=\"bg-gray-50 p-3 rounded border\">\r\n                <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Section Extraction Tests</h4>\r\n                <div className=\"space-y-2\">\r\n                  {logicTestResults.section_extraction?.map((test: any, index: number) => (\r\n                    <div key={index} className=\"text-xs bg-white p-2 rounded border\">\r\n                      <div className=\"grid grid-cols-2 gap-2\">\r\n                        <div>\r\n                          <span className=\"font-medium\">Original:</span> {test.original || 'null'}\r\n                        </div>\r\n                        <div>\r\n                          <span className=\"font-medium\">Extracted:</span> {test.extracted ? `Section ${test.extracted.section_number}: ${test.extracted.definition}` : 'null'}\r\n                        </div>\r\n                      </div>\r\n                      {!test.success && (\r\n                        <div className=\"text-red-600 mt-1\">\r\n                          Error: {test.error}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {logicTestResults.error && (\r\n            <div className=\"mt-4 bg-red-50 border border-red-200 rounded-lg p-3\">\r\n              <p className=\"text-sm text-red-800\">\r\n                <strong>Error:</strong> {logicTestResults.error}\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Information Panel */}\r\n      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n        <div className=\"flex items-center justify-between mb-2\">\r\n          <h3 className=\"text-sm font-medium text-blue-800\">Enhanced Normalization Process</h3>\r\n          <div className=\"flex space-x-2\">\r\n            <button\r\n              onClick={testConnection}\r\n              className=\"inline-flex items-center px-3 py-1 text-xs font-medium rounded border border-blue-300 text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              <CheckCircle className=\"h-3 w-3 mr-1\" />\r\n              Test Connection\r\n            </button>\r\n            <button\r\n              onClick={generateDebugScript}\r\n              className=\"inline-flex items-center px-3 py-1 text-xs font-medium rounded border border-blue-300 text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              <Download className=\"h-3 w-3 mr-1\" />\r\n              Debug Script\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <ul className=\"text-sm text-blue-700 space-y-1\">\r\n          <li>• <strong>Statute Name Normalization:</strong> Enhanced logic for cleaning names, extracting section info, and handling legal prefixes</li>\r\n          <li>• <strong>Structure Cleaning:</strong> Advanced field mapping with support for all schema fields including content and metadata</li>\r\n          <li>• <strong>Alphabetical Sorting:</strong> Smart sorting with year-based grouping within statute name categories</li>\r\n        </ul>\r\n        <p className=\"text-xs text-blue-600 mt-2\">\r\n          The process creates collections: <code>normalized_statutes</code> → <code>cleaned_statutes</code> → <code>sorted_statutes</code>\r\n        </p>\r\n      </div>\r\n\r\n      {/* Rollback Confirmation Modal */}\r\n      {showRollbackConfirm && (\r\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\r\n          <div className=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\r\n            <div className=\"mt-3 text-center\">\r\n              <div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100\">\r\n                <AlertTriangle className=\"h-6 w-6 text-red-600\" />\r\n              </div>\r\n              <h3 className=\"text-lg font-medium text-gray-900 mt-4\">Confirm Rollback</h3>\r\n              <div className=\"mt-2 px-7 py-3\">\r\n                <p className=\"text-sm text-gray-500\">\r\n                  Are you sure you want to rollback all normalization changes? This will delete all normalized, cleaned, and sorted collections.\r\n                </p>\r\n              </div>\r\n              <div className=\"flex justify-center space-x-4 mt-4\">\r\n                <button\r\n                  onClick={() => setShowRollbackConfirm(false)}\r\n                  className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={rollbackNormalization}\r\n                  className=\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500\"\r\n                >\r\n                  Confirm Rollback\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* New Collection Modal */}\r\n      {showNewCollectionModal && (\r\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\r\n          <div className=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\r\n            <div className=\"mt-3\">\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Create New Collection</h3>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Collection Type\r\n                  </label>\r\n                  <div className=\"flex space-x-4\">\r\n                    <label className=\"flex items-center\">\r\n                      <input\r\n                        type=\"radio\"\r\n                        value=\"source\"\r\n                        checked={newCollectionType === 'source'}\r\n                        onChange={(e) => setNewCollectionType(e.target.value as 'source' | 'target')}\r\n                        className=\"mr-2\"\r\n                      />\r\n                      Source Collection\r\n                    </label>\r\n                    <label className=\"flex items-center\">\r\n                      <input\r\n                        type=\"radio\"\r\n                        value=\"target\"\r\n                        checked={newCollectionType === 'target'}\r\n                        onChange={(e) => setNewCollectionType(e.target.value as 'source' | 'target')}\r\n                        className=\"mr-2\"\r\n                      />\r\n                      Target Collection\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Collection Name\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newCollectionName}\r\n                    onChange={(e) => setNewCollectionName(e.target.value)}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                    placeholder=\"Enter collection name\"\r\n                    onKeyPress={(e) => e.key === 'Enter' && handleNewCollection()}\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"flex justify-end space-x-3\">\r\n                  <button\r\n                    onClick={() => {\r\n                      setShowNewCollectionModal(false);\r\n                      setNewCollectionName('');\r\n                    }}\r\n                    className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    onClick={handleNewCollection}\r\n                    disabled={!newCollectionName.trim()}\r\n                    className=\"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                  >\r\n                    Create Collection\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* New Database Modal */}\r\n      {showNewDatabaseModal && (\r\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\r\n          <div className=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\r\n            <div className=\"mt-3\">\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Create New Database</h3>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Database Name\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newDatabaseName}\r\n                    onChange={(e) => setNewDatabaseName(e.target.value)}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n                    placeholder=\"Enter database name\"\r\n                    onKeyPress={(e) => e.key === 'Enter' && handleNewDatabase()}\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"flex justify-end space-x-3\">\r\n                  <button\r\n                    onClick={() => {\r\n                      setShowNewDatabaseModal(false);\r\n                      setNewDatabaseName('');\r\n                    }}\r\n                    className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    onClick={handleNewDatabase}\r\n                    disabled={!newDatabaseName.trim()}\r\n                    className=\"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                  >\r\n                    Create Database\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Config Saved Indicator */}\r\n      {configSaved && (\r\n        <div className=\"fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded-md shadow-lg z-50\">\r\n          <CheckCircle className=\"h-4 w-4 mr-2\" />\r\n          Configuration Saved!\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DatabaseNormalization;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}